<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">CGView.js</a>
    </div>
		<div class="collapse navbar-collapse" id="main-nav">
			<ul class="nav navbar-nav">
				<li><a href="../viewer.html">Demo</a></li>
				<li class="active"><a href="#">Docs</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="basic_map.html">Basic Map</a></li>
            <li><a href="#">Sequence Map </a></li>
            <li><a href="#">JSON Map</a></li>
          </ul>
        </li>
			</ul>
    </div>
	</div>
</div>


<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Backbone">
            <span class="title">
                <a href="Backbone.html">Backbone</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Backbone#bpMargin"><a href="Backbone.html#bpMargin">bpMargin</a></li>
            
                <li data-name="Backbone#bpSpacing"><a href="Backbone.html#bpSpacing">bpSpacing</a></li>
            
                <li data-name="Backbone#bpThicknessAddition"><a href="Backbone.html#bpThicknessAddition">bpThicknessAddition</a></li>
            
                <li data-name="Backbone#canvas"><a href="Backbone.html#canvas">canvas</a></li>
            
                <li data-name="Backbone#color"><a href="Backbone.html#color">color</a></li>
            
                <li data-name="Backbone#font"><a href="Backbone.html#font">font</a></li>
            
                <li data-name="Backbone#fontColor"><a href="Backbone.html#fontColor">fontColor</a></li>
            
                <li data-name="Backbone#maxThickness"><a href="Backbone.html#maxThickness">maxThickness</a></li>
            
                <li data-name="Backbone#radius"><a href="Backbone.html#radius">radius</a></li>
            
                <li data-name="Backbone#sequence"><a href="Backbone.html#sequence">sequence</a></li>
            
                <li data-name="Backbone#thickness"><a href="Backbone.html#thickness">thickness</a></li>
            
                <li data-name="Backbone#viewer"><a href="Backbone.html#viewer">viewer</a></li>
            
                <li data-name="Backbone#visibleRange"><a href="Backbone.html#visibleRange">visibleRange</a></li>
            
                <li data-name="Backbone#zoomedRadius"><a href="Backbone.html#zoomedRadius">zoomedRadius</a></li>
            
                <li data-name="Backbone#zoomedThickness"><a href="Backbone.html#zoomedThickness">zoomedThickness</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Backbone#maxZoomFactor"><a href="Backbone.html#maxZoomFactor">maxZoomFactor</a></li>
            
                <li data-name="Backbone#pixelsPerBp"><a href="Backbone.html#pixelsPerBp">pixelsPerBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Canvas">
            <span class="title">
                <a href="Canvas.html">Canvas</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Canvas#_testDrawRange"><a href="Canvas.html#_testDrawRange">_testDrawRange</a></li>
            
                <li data-name="Canvas#layerNames"><a href="Canvas.html#layerNames">layerNames</a></li>
            
                <li data-name="Canvas#scale"><a href="Canvas.html#scale">scale</a></li>
            
                <li data-name="Canvas#sequence"><a href="Canvas.html#sequence">sequence</a></li>
            
                <li data-name="Canvas#viewer"><a href="Canvas.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Canvas#arcPath"><a href="Canvas.html#arcPath">arcPath</a></li>
            
                <li data-name="Canvas#clear"><a href="Canvas.html#clear">clear</a></li>
            
                <li data-name="Canvas#context"><a href="Canvas.html#context">context</a></li>
            
                <li data-name="Canvas#drawArc"><a href="Canvas.html#drawArc">drawArc</a></li>
            
                <li data-name="Canvas#layers"><a href="Canvas.html#layers">layers</a></li>
            
                <li data-name="Canvas#maximumVisibleRadius"><a href="Canvas.html#maximumVisibleRadius">maximumVisibleRadius</a></li>
            
                <li data-name="Canvas#node"><a href="Canvas.html#node">node</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Caption">
            <span class="title">
                <a href="Caption.html">Caption</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Caption#backgroundColor"><a href="Caption.html#backgroundColor">backgroundColor</a></li>
            
                <li data-name="Caption#canvas"><a href="Caption.html#canvas">canvas</a></li>
            
                <li data-name="Caption#ctx"><a href="Caption.html#ctx">ctx</a></li>
            
                <li data-name="Caption#font"><a href="Caption.html#font">font</a></li>
            
                <li data-name="Caption#fontColor"><a href="Caption.html#fontColor">fontColor</a></li>
            
                <li data-name="Caption#id"><a href="Caption.html#id">id</a></li>
            
                <li data-name="Caption#items"><a href="Caption.html#items">items</a></li>
            
                <li data-name="Caption#position"><a href="Caption.html#position">position</a></li>
            
                <li data-name="Caption#textAlignment"><a href="Caption.html#textAlignment">textAlignment</a></li>
            
                <li data-name="Caption#viewer"><a href="Caption.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Caption#refresh"><a href="Caption.html#refresh">refresh</a></li>
            
                <li data-name="Caption#toString"><a href="Caption.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CaptionItem">
            <span class="title">
                <a href="CaptionItem.html">CaptionItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="CaptionItem#caption"><a href="CaptionItem.html#caption">caption</a></li>
            
                <li data-name="CaptionItem#font"><a href="CaptionItem.html#font">font</a></li>
            
                <li data-name="CaptionItem#fontColor"><a href="CaptionItem.html#fontColor">fontColor</a></li>
            
                <li data-name="CaptionItem#height"><a href="CaptionItem.html#height">height</a></li>
            
                <li data-name="CaptionItem#id"><a href="CaptionItem.html#id">id</a></li>
            
                <li data-name="CaptionItem#parent"><a href="CaptionItem.html#parent">parent</a></li>
            
                <li data-name="CaptionItem#parent"><a href="CaptionItem.html#parent">parent</a></li>
            
                <li data-name="CaptionItem#text"><a href="CaptionItem.html#text">text</a></li>
            
                <li data-name="CaptionItem#textAlignment"><a href="CaptionItem.html#textAlignment">textAlignment</a></li>
            
                <li data-name="CaptionItem#viewer"><a href="CaptionItem.html#viewer">viewer</a></li>
            
                <li data-name="CaptionItem#width"><a href="CaptionItem.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CaptionItem#toString"><a href="CaptionItem.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CGRange">
            <span class="title">
                <a href="CGRange.html">CGRange</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="CGRange#length"><a href="CGRange.html#length">length</a></li>
            
                <li data-name="CGRange#middle"><a href="CGRange.html#middle">middle</a></li>
            
                <li data-name="CGRange#sequence"><a href="CGRange.html#sequence">sequence</a></li>
            
                <li data-name="CGRange#sequenceLength"><a href="CGRange.html#sequenceLength">sequenceLength</a></li>
            
                <li data-name="CGRange#start"><a href="CGRange.html#start">start</a></li>
            
                <li data-name="CGRange#stop"><a href="CGRange.html#stop">stop</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CGRange#contains"><a href="CGRange.html#contains">contains</a></li>
            
                <li data-name="CGRange#copy"><a href="CGRange.html#copy">copy</a></li>
            
                <li data-name="CGRange#getStartPlus"><a href="CGRange.html#getStartPlus">getStartPlus</a></li>
            
                <li data-name="CGRange#getStopPlus"><a href="CGRange.html#getStopPlus">getStopPlus</a></li>
            
                <li data-name="CGRange#isFullCircle"><a href="CGRange.html#isFullCircle">isFullCircle</a></li>
            
                <li data-name="CGRange#mergeWithRange"><a href="CGRange.html#mergeWithRange">mergeWithRange</a></li>
            
                <li data-name="CGRange#normalize"><a href="CGRange.html#normalize">normalize</a></li>
            
                <li data-name="CGRange#overHalfCircle"><a href="CGRange.html#overHalfCircle">overHalfCircle</a></li>
            
                <li data-name="CGRange#overlapsRange"><a href="CGRange.html#overlapsRange">overlapsRange</a></li>
            
                <li data-name="CGRange#spansOrigin"><a href="CGRange.html#spansOrigin">spansOrigin</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Color">
            <span class="title">
                <a href="Color.html">Color</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Color#hsv"><a href="Color.html#hsv">hsv</a></li>
            
                <li data-name="Color#opacity"><a href="Color.html#opacity">opacity</a></li>
            
                <li data-name="Color#rgb"><a href="Color.html#rgb">rgb</a></li>
            
                <li data-name="Color#rgba"><a href="Color.html#rgba">rgba</a></li>
            
                <li data-name="Color#rgbaString"><a href="Color.html#rgbaString">rgbaString</a></li>
            
                <li data-name="Color#rgbString"><a href="Color.html#rgbString">rgbString</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Color#setColor"><a href="Color.html#setColor">setColor</a></li>
            
                <li data-name="Color#toString"><a href="Color.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ColorPicker">
            <span class="title">
                <a href="ColorPicker.html">ColorPicker</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ColorPicker#_configureView"><a href="ColorPicker.html#_configureView">_configureView</a></li>
            
                <li data-name="ColorPicker#alphaListener"><a href="ColorPicker.html#alphaListener">alphaListener</a></li>
            
                <li data-name="ColorPicker#dialogListener"><a href="ColorPicker.html#dialogListener">dialogListener</a></li>
            
                <li data-name="ColorPicker#doneListener"><a href="ColorPicker.html#doneListener">doneListener</a></li>
            
                <li data-name="ColorPicker#enableDragging"><a href="ColorPicker.html#enableDragging">enableDragging</a></li>
            
                <li data-name="ColorPicker#originalColorListener"><a href="ColorPicker.html#originalColorListener">originalColorListener</a></li>
            
                <li data-name="ColorPicker#pickerListener"><a href="ColorPicker.html#pickerListener">pickerListener</a></li>
            
                <li data-name="ColorPicker#slideListener"><a href="ColorPicker.html#slideListener">slideListener</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Dialog">
            <span class="title">
                <a href="Dialog.html">Dialog</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Dialog#fadeTime"><a href="Dialog.html#fadeTime">fadeTime</a></li>
            
                <li data-name="Dialog#visible"><a href="Dialog.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Dialog#close"><a href="Dialog.html#close">close</a></li>
            
                <li data-name="Dialog#open"><a href="Dialog.html#open">open</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Divider">
            <span class="title">
                <a href="Divider.html">Divider</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Divider#canvas"><a href="Divider.html#canvas">canvas</a></li>
            
                <li data-name="Divider#color"><a href="Divider.html#color">color</a></li>
            
                <li data-name="Divider#radii"><a href="Divider.html#radii">radii</a></li>
            
                <li data-name="Divider#spacing"><a href="Divider.html#spacing">spacing</a></li>
            
                <li data-name="Divider#thickness"><a href="Divider.html#thickness">thickness</a></li>
            
                <li data-name="Divider#viewer"><a href="Divider.html#viewer">viewer</a></li>
            
                <li data-name="Divider#visibleRange"><a href="Divider.html#visibleRange">visibleRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="EventMonitor">
            <span class="title">
                <a href="EventMonitor.html">EventMonitor</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="EventMonitor#canvas"><a href="EventMonitor.html#canvas">canvas</a></li>
            
                <li data-name="EventMonitor#viewer"><a href="EventMonitor.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Events">
            <span class="title">
                <a href="Events.html">Events</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Events#off"><a href="Events.html#off">off</a></li>
            
                <li data-name="Events#on"><a href="Events.html#on">on</a></li>
            
                <li data-name="Events#trigger"><a href="Events.html#trigger">trigger</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Feature">
            <span class="title">
                <a href="Feature.html">Feature</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Feature#color"><a href="Feature.html#color">color</a></li>
            
                <li data-name="Feature#decoration"><a href="Feature.html#decoration">decoration</a></li>
            
                <li data-name="Feature#extractedFromSequence"><a href="Feature.html#extractedFromSequence">extractedFromSequence</a></li>
            
                <li data-name="Feature#featureType"><a href="Feature.html#featureType">featureType</a></li>
            
                <li data-name="Feature#label"><a href="Feature.html#label">label</a></li>
            
                <li data-name="Feature#legend"><a href="Feature.html#legend">legend</a></li>
            
                <li data-name="Feature#legendItem"><a href="Feature.html#legendItem">legendItem</a></li>
            
                <li data-name="Feature#range"><a href="Feature.html#range">range</a></li>
            
                <li data-name="Feature#start"><a href="Feature.html#start">start</a></li>
            
                <li data-name="Feature#stop"><a href="Feature.html#stop">stop</a></li>
            
                <li data-name="Feature#type"><a href="Feature.html#type">type</a></li>
            
                <li data-name="Feature#viewer"><a href="Feature.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="FeatureType">
            <span class="title">
                <a href="FeatureType.html">FeatureType</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="FeatureType#decoration"><a href="FeatureType.html#decoration">decoration</a></li>
            
                <li data-name="FeatureType#id"><a href="FeatureType.html#id">id</a></li>
            
                <li data-name="FeatureType#name"><a href="FeatureType.html#name">name</a></li>
            
                <li data-name="FeatureType#viewer"><a href="FeatureType.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Font">
            <span class="title">
                <a href="Font.html">Font</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Font#css"><a href="Font.html#css">css</a></li>
            
                <li data-name="Font#family"><a href="Font.html#family">family</a></li>
            
                <li data-name="Font#height"><a href="Font.html#height">height</a></li>
            
                <li data-name="Font#size"><a href="Font.html#size">size</a></li>
            
                <li data-name="Font#string"><a href="Font.html#string">string</a></li>
            
                <li data-name="Font#style"><a href="Font.html#style">style</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Font.calculateWidths"><a href="Font.html#.calculateWidths">calculateWidths</a></li>
            
                <li data-name="Font#cssScaled"><a href="Font.html#cssScaled">cssScaled</a></li>
            
                <li data-name="Font#toString"><a href="Font.html#toString">toString</a></li>
            
                <li data-name="Font#width"><a href="Font.html#width">width</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Highlighter">
            <span class="title">
                <a href="Highlighter.html">Highlighter</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Highlighter#viewer"><a href="Highlighter.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IO">
            <span class="title">
                <a href="IO.html">IO</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IO#loadJSON"><a href="IO.html#loadJSON">loadJSON</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Layout">
            <span class="title">
                <a href="Layout.html">Layout</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Layout#insideRadius"><a href="Layout.html#insideRadius">insideRadius</a></li>
            
                <li data-name="Layout#maxSlotThickness"><a href="Layout.html#maxSlotThickness">maxSlotThickness</a></li>
            
                <li data-name="Layout#outsideRadius"><a href="Layout.html#outsideRadius">outsideRadius</a></li>
            
                <li data-name="Layout#viewer"><a href="Layout.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Layout#_adjustProportions"><a href="Layout.html#_adjustProportions">_adjustProportions</a></li>
            
                <li data-name="Layout#_calculateSlotThickness"><a href="Layout.html#_calculateSlotThickness">_calculateSlotThickness</a></li>
            
                <li data-name="Layout#updateLayout"><a href="Layout.html#updateLayout">updateLayout</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Legend">
            <span class="title">
                <a href="Legend.html">Legend</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Legend#highlightedSwatchedItem"><a href="Legend.html#highlightedSwatchedItem">highlightedSwatchedItem</a></li>
            
                <li data-name="Legend#selectedSwatchedItem"><a href="Legend.html#selectedSwatchedItem">selectedSwatchedItem</a></li>
            
                <li data-name="Legend#viewer"><a href="Legend.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Legend#toString"><a href="Legend.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LegendItem">
            <span class="title">
                <a href="LegendItem.html">LegendItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LegendItem#color"><a href="LegendItem.html#color">color</a></li>
            
                <li data-name="LegendItem#drawSwatch"><a href="LegendItem.html#drawSwatch">drawSwatch</a></li>
            
                <li data-name="LegendItem#legend"><a href="LegendItem.html#legend">legend</a></li>
            
                <li data-name="LegendItem#swatchColor"><a href="LegendItem.html#swatchColor">swatchColor</a></li>
            
                <li data-name="LegendItem#swatchHighlighted"><a href="LegendItem.html#swatchHighlighted">swatchHighlighted</a></li>
            
                <li data-name="LegendItem#swatchSelected"><a href="LegendItem.html#swatchSelected">swatchSelected</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LegendItem#toString"><a href="LegendItem.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Menu">
            <span class="title">
                <a href="Menu.html">Menu</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Menu#available"><a href="Menu.html#available">available</a></li>
            
                <li data-name="Menu#height"><a href="Menu.html#height">height</a></li>
            
                <li data-name="Menu#opened"><a href="Menu.html#opened">opened</a></li>
            
                <li data-name="Menu#slideTime"><a href="Menu.html#slideTime">slideTime</a></li>
            
                <li data-name="Menu#width"><a href="Menu.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Menu#close"><a href="Menu.html#close">close</a></li>
            
                <li data-name="Menu#open"><a href="Menu.html#open">open</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Messenger">
            <span class="title">
                <a href="Messenger.html">Messenger</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Messenger#fadeTime"><a href="Messenger.html#fadeTime">fadeTime</a></li>
            
                <li data-name="Messenger#viewer"><a href="Messenger.html#viewer">viewer</a></li>
            
                <li data-name="Messenger#visible"><a href="Messenger.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Messenger#close"><a href="Messenger.html#close">close</a></li>
            
                <li data-name="Messenger#open"><a href="Messenger.html#open">open</a></li>
            
                <li data-name="Messenger#toString"><a href="Messenger.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Plot">
            <span class="title">
                <a href="Plot.html">Plot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Plot#baseline"><a href="Plot.html#baseline">baseline</a></li>
            
                <li data-name="Plot#color"><a href="Plot.html#color">color</a></li>
            
                <li data-name="Plot#legend"><a href="Plot.html#legend">legend</a></li>
            
                <li data-name="Plot#legendItem"><a href="Plot.html#legendItem">legendItem</a></li>
            
                <li data-name="Plot#legendItemNegative"><a href="Plot.html#legendItemNegative">legendItemNegative</a></li>
            
                <li data-name="Plot#legendItemPositive"><a href="Plot.html#legendItemPositive">legendItemPositive</a></li>
            
                <li data-name="Plot#legendNegative"><a href="Plot.html#legendNegative">legendNegative</a></li>
            
                <li data-name="Plot#legendPositive"><a href="Plot.html#legendPositive">legendPositive</a></li>
            
                <li data-name="Plot#positions"><a href="Plot.html#positions">positions</a></li>
            
                <li data-name="Plot#score"><a href="Plot.html#score">score</a></li>
            
                <li data-name="Plot#viewer"><a href="Plot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Rect">
            <span class="title">
                <a href="Rect.html">Rect</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Rect#bottom"><a href="Rect.html#bottom">bottom</a></li>
            
                <li data-name="Rect#height"><a href="Rect.html#height">height</a></li>
            
                <li data-name="Rect#left"><a href="Rect.html#left">left</a></li>
            
                <li data-name="Rect#right"><a href="Rect.html#right">right</a></li>
            
                <li data-name="Rect#top"><a href="Rect.html#top">top</a></li>
            
                <li data-name="Rect#width"><a href="Rect.html#width">width</a></li>
            
                <li data-name="Rect#x"><a href="Rect.html#x">x</a></li>
            
                <li data-name="Rect#y"><a href="Rect.html#y">y</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Rect#containsPt"><a href="Rect.html#containsPt">containsPt</a></li>
            
                <li data-name="Rect#overlap"><a href="Rect.html#overlap">overlap</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ruler">
            <span class="title">
                <a href="Ruler.html">Ruler</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Ruler#canvas"><a href="Ruler.html#canvas">canvas</a></li>
            
                <li data-name="Ruler#majorTicks"><a href="Ruler.html#majorTicks">majorTicks</a></li>
            
                <li data-name="Ruler#majorTickStep"><a href="Ruler.html#majorTickStep">majorTickStep</a></li>
            
                <li data-name="Ruler#minorTicks"><a href="Ruler.html#minorTicks">minorTicks</a></li>
            
                <li data-name="Ruler#minorTickStep"><a href="Ruler.html#minorTickStep">minorTickStep</a></li>
            
                <li data-name="Ruler#sequence"><a href="Ruler.html#sequence">sequence</a></li>
            
                <li data-name="Ruler#tickFormater"><a href="Ruler.html#tickFormater">tickFormater</a></li>
            
                <li data-name="Ruler#viewer"><a href="Ruler.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Ruler#_createTickFormatter"><a href="Ruler.html#_createTickFormatter">_createTickFormatter</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Sequence">
            <span class="title">
                <a href="Sequence.html">Sequence</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Sequence#canvas"><a href="Sequence.html#canvas">canvas</a></li>
            
                <li data-name="Sequence#color"><a href="Sequence.html#color">color</a></li>
            
                <li data-name="Sequence#font"><a href="Sequence.html#font">font</a></li>
            
                <li data-name="Sequence#length"><a href="Sequence.html#length">length</a></li>
            
                <li data-name="Sequence#seq"><a href="Sequence.html#seq">seq</a></li>
            
                <li data-name="Sequence#sequenceExtractor"><a href="Sequence.html#sequenceExtractor">sequenceExtractor</a></li>
            
                <li data-name="Sequence#viewer"><a href="Sequence.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Sequence#addBp"><a href="Sequence.html#addBp">addBp</a></li>
            
                <li data-name="Sequence#findPattern"><a href="Sequence.html#findPattern">findPattern</a></li>
            
                <li data-name="Sequence#forRange"><a href="Sequence.html#forRange">forRange</a></li>
            
                <li data-name="Sequence#subtractBp"><a href="Sequence.html#subtractBp">subtractBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SequenceExtractor">
            <span class="title">
                <a href="SequenceExtractor.html">SequenceExtractor</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="SequenceExtractor#length"><a href="SequenceExtractor.html#length">length</a></li>
            
                <li data-name="SequenceExtractor#seqString"><a href="SequenceExtractor.html#seqString">seqString</a></li>
            
                <li data-name="SequenceExtractor#sequence"><a href="SequenceExtractor.html#sequence">sequence</a></li>
            
                <li data-name="SequenceExtractor#viewer"><a href="SequenceExtractor.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Slot">
            <span class="title">
                <a href="Slot.html">Slot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Slot#inside"><a href="Slot.html#inside">inside</a></li>
            
                <li data-name="Slot#layout"><a href="Slot.html#layout">layout</a></li>
            
                <li data-name="Slot#outside"><a href="Slot.html#outside">outside</a></li>
            
                <li data-name="Slot#position"><a href="Slot.html#position">position</a></li>
            
                <li data-name="Slot#proportionOfRadius"><a href="Slot.html#proportionOfRadius">proportionOfRadius</a></li>
            
                <li data-name="Slot#radius"><a href="Slot.html#radius">radius</a></li>
            
                <li data-name="Slot#sequence"><a href="Slot.html#sequence">sequence</a></li>
            
                <li data-name="Slot#thickness"><a href="Slot.html#thickness">thickness</a></li>
            
                <li data-name="Slot#track"><a href="Slot.html#track">track</a></li>
            
                <li data-name="Slot#viewer"><a href="Slot.html#viewer">viewer</a></li>
            
                <li data-name="Slot#visibleRange"><a href="Slot.html#visibleRange">visibleRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Slot#containsRadius"><a href="Slot.html#containsRadius">containsRadius</a></li>
            
                <li data-name="Slot#pixelsPerBp"><a href="Slot.html#pixelsPerBp">pixelsPerBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Track">
            <span class="title">
                <a href="Track.html">Track</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Track#contents"><a href="Track.html#contents">contents</a></li>
            
                <li data-name="Track#contentType"><a href="Track.html#contentType">contentType</a></li>
            
                <li data-name="Track#id"><a href="Track.html#id">id</a></li>
            
                <li data-name="Track#layout"><a href="Track.html#layout">layout</a></li>
            
                <li data-name="Track#loadProgress"><a href="Track.html#loadProgress">loadProgress</a></li>
            
                <li data-name="Track#name"><a href="Track.html#name">name</a></li>
            
                <li data-name="Track#position"><a href="Track.html#position">position</a></li>
            
                <li data-name="Track#readingFrame"><a href="Track.html#readingFrame">readingFrame</a></li>
            
                <li data-name="Track#sequence"><a href="Track.html#sequence">sequence</a></li>
            
                <li data-name="Track#strand"><a href="Track.html#strand">strand</a></li>
            
                <li data-name="Track#viewer"><a href="Track.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Viewer#backgroundColor"><a href="Viewer.html#backgroundColor">backgroundColor</a></li>
            
                <li data-name="Viewer#height"><a href="Viewer.html#height">height</a></li>
            
                <li data-name="Viewer#minDimension"><a href="Viewer.html#minDimension">minDimension</a></li>
            
                <li data-name="Viewer#scale"><a href="Viewer.html#scale">scale</a></li>
            
                <li data-name="Viewer#sequence"><a href="Viewer.html#sequence">sequence</a></li>
            
                <li data-name="Viewer#width"><a href="Viewer.html#width">width</a></li>
            
                <li data-name="Viewer#zoomFactor"><a href="Viewer.html#zoomFactor">zoomFactor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#captions"><a href="Viewer.html#captions">captions</a></li>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#features"><a href="Viewer.html#features">features</a></li>
            
                <li data-name="Viewer#featureTypes"><a href="Viewer.html#featureTypes">featureTypes</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
                <li data-name="Viewer#maxZoomedRadius"><a href="Viewer.html#maxZoomedRadius">maxZoomedRadius</a></li>
            
                <li data-name="Viewer#moveTo"><a href="Viewer.html#moveTo">moveTo</a></li>
            
                <li data-name="Viewer#plots"><a href="Viewer.html#plots">plots</a></li>
            
                <li data-name="Viewer#resize"><a href="Viewer.html#resize">resize</a></li>
            
                <li data-name="Viewer#slots"><a href="Viewer.html#slots">slots</a></li>
            
                <li data-name="Viewer#tracks"><a href="Viewer.html#tracks">tracks</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Canvas.js.html">Source: Canvas.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>//////////////////////////////////////////////////////////////////////////////
// Canvas
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {

  class Canvas {

    /**
     * - Adds several layers (canvases) for drawing
     * - Contains the x, y, bp scales
     * - has methods for for determining visible regions of the circle at a particular radius
     * NOTE: anything drawn to the canvas must take the pixel ratio into account
     *       and should use the CGV.pixel() method.
     * - TODO: Have image describing the circle (center at 0,0) and how it relates to the canvas
     */
    constructor(viewer, container, options = {}) {
      this._viewer = viewer;
      this.width = CGV.defaultFor(options.width, 600);
      this.height = CGV.defaultFor(options.height, 600);

      // Create layers
      this.determinePixelRatio(container);
      this._layerNames = ['background', 'map', 'captions', 'ui'];
      this._layers = this.createLayers(container, this._layerNames, this._width, this._height);

      // Setup scales
      this._scale = {};
      this.refreshScales();
    }

    determinePixelRatio(container) {
      var testNode = container.append("canvas")
        .style('position',  'absolute')
        .style('top',  0)
        .style('left',  0)
        .attr("width", this._width)
        .attr("height", this._height).node();
      // Check for canvas support
      if (testNode.getContext) {
        // Get pixel ratio and upscale canvas depending on screen resolution
        // http://www.html5rocks.com/en/tutorials/canvas/hidpi/
        CGV.pixelRatio = CGV.getPixelRatio(testNode);
      } else {
        container.html('&lt;h3>CGView requires Canvas, which is not supported by this browser.&lt;/h3>');
      }
      d3.select(testNode).remove();
    }

    createLayers(container, layerNames, width, height) {
      var layers = {};

      for (var i = 0, len = layerNames.length; i &lt; len; i++) {
        var layerName = layerNames[i]
        var zIndex = (i + 1) * 10;
        var node = container.append("canvas")
          .classed('cgv-layer', true)
          .classed('cgv-layer-' + layerName, true)
          .style('z-index',  zIndex)
          .attr("width", width)
          .attr("height", height).node();

        CGV.scaleResolution(node, CGV.pixelRatio);

        // Set viewer context
        var ctx = node.getContext('2d');
        layers[layerName] = { ctx: ctx, node: node };
      }
      return layers
    }

    resize(width, height) {
      this.width = width;
      this.height = height;
      for (var layerName of this.layerNames) {
        var layerNode = this.layers(layerName).node;
        // Note, here the width/height will take into account the pixelRatio
        layerNode.width = this.width;
        layerNode.height = this.height;
        // Note, here the width/height will be the same as viewer (no pixel ratio)
        layerNode.style.width = width + 'px';
        layerNode.style.height = height + 'px';
      }
      this.refreshScales();
    }









    /**
     * @member {Viewer} - Get the viewer.
     */
    get viewer() {
      return this._viewer
    }

    /**
     * @member {Object} - Return an object that contains the 3 [D3 Continuous Scales](https://github.com/d3/d3-scale#continuous-scales) used by CGView.
     *
     * Scale | Description
     * ------|------------
     *  x    | Convert between the canvas x position (0 is left side of canvas) and map x position (center of circle).
     *  y    | Convert between the canvas y position (0 is top side of canvas) and map y position (center of circle).
     *  bp   | Convert between bp and radians (Top of map is 1 bp and -π/2).
     *
     * ```js
     * // Examples:
     * // For a map with canvas width and height of 600. Before moving or zooming the map.
     * canvas.scale.x(0)          // 300
     * canvas.scale.y(0)          // 300
     * canvas.scale.x.invert(300) // 0
     * canvas.scale.y.invert(300) // 0
     * // For a map with a length of 1000
     * canvas.scale.bp(1)        // -π/2
     * canvas.scale.bp(250)      // 0
     * canvas.scale.bp(500)      // π/2
     * canvas.scale.bp(750)      // π
     * canvas.scale.bp(1000)     // 3π/2
     * canvas.scale.bp(1000)     // 3π/2
     * canvas.scale.bp.invert(π) // 750
     * ```
     *
     */
    get scale() {
      return this._scale
    }

    /**
     * @member {Array} - Get the names of the layers.
     */
    get layerNames() {
      return this._layerNames
    }

    /**
     * @member {Sequence} - Get the sequence.
     */
    get sequence() {
      return this.viewer.sequence
    }

    //TODO: move to setter for width and height
    refreshScales() {
      var x_domain, y_domain;
      var x1, x2, y1, y2;
      // Save scale domains to keep tract of translation
      if (this.scale.x) {
        var orig_x_domain = this.scale.x.domain();
        var orig_width = orig_x_domain[1] - orig_x_domain[0];
        x1 = orig_x_domain[0] / orig_width;
        x2 = orig_x_domain[1] / orig_width;
      } else {
        x1 = -0.5;
        x2 = 0.5;
      }
      if (this.scale.y) {
        var orig_y_domain = this.scale.y.domain();
        var orig_width = orig_y_domain[0] - orig_y_domain[1];
        y1 = orig_y_domain[0] / orig_width;
        y2 = orig_y_domain[1] / orig_width;
      } else {
        y1 = 0.5;
        y2 = -0.5;
      }
      this.scale.x = d3.scaleLinear()
        .domain([this.width * x1, this.width * x2])
        .range([0, this.width]);
      this.scale.y = d3.scaleLinear()
        .domain([this.height * y1, this.height * y2])
        .range([0, this.height]);
    }

    get width() {
      return CGV.pixel(this._width)
    }

    set width(width) {
      this._width = width;
    }

    get height() {
      return CGV.pixel(this._height)
    }

    set height(height) {
      this._height = height;
    }

    get cursor() {
      return d3.select(this.node('ui')).style('cursor')
    }

    set cursor(value) {
      d3.select(this.node('ui')).style('cursor', value);
    }

    /**
     * Clear the viewer canvas
     */
    clear(layerName = 'map') {
      if (layerName == 'all') {
        for (var i = 0, len = this.layerNames.length; i &lt; len; i++) {
          this.clear(this.layerNames[i]);
        }
      } else {
        this.context(layerName).clearRect(0, 0, CGV.pixel(this.width), CGV.pixel(this.height));
      }
    }
    // clear(color = 'white') {
    //   this.ctx.clearRect(0, 0, CGV.pixel(this.width), CGV.pixel(this.height));
    //   // this.ctx.fillStyle = color;
    //   // this.ctx.fillRect(0, 0, CGV.pixel(this.width), CGV.pixel(this.height));
    // }

    /**
    * Flash a message on the center of the viewer.
    */
    // flash(msg) {
    //   var ctx = this.ctx;
    //   // this.ctx.font = this.adjust_font(1.5);
    //   ctx.textAlign = 'center';
    //   ctx.textBaseline = 'center';
    //   var x = this.width / 2
    //   var y = this.height / 2
    //   ctx.fillText(msg, x, y);
    // }

    // Decoration: arc, clockwise-arrow, counterclockwise-arrow
    //
    //  clockwise-arrow (drawn clockwise from arcStartBp; direction = 1):
    //
    //    arcStartBp (feature start)      arcStopBp
    //           |                        |
    //           --------------------------  arrowTipBp
    //           |                          \|
    //           |                           x - arrowTipPt (feature stop)
    //           |                          /
    //           -------------------------x
    //                                    |
    //                                    innerArcStartPt
    //
    //  counterclockwise-arrow (drawn counterclockwise from arcStartBp; direction = -1):
    //
    //                arcStopBp                      arcStartBp (feature stop)
    //                       |                        |
    //           arrowTipBp   -------------------------
    //                    | /                         |
    //       arrowTipPt - x                           |
    //  (feature start)    \                          |
    //                       x-------------------------
    //                       |
    //                       innerArcStartPt
    //
    // If the zoomFactor gets too large, the arc drawing becomes unstable.
    // (ie the arc wiggle in the map as zooming)
    // So when the zoomFactor is large, switch to drawing lines (arcPath handles this).
    drawArc(layer, start, stop, radius, color = '#000000', width = 1, decoration = 'arc') {
      var scale = this.scale;
      // var ctx = this.ctx;
      var ctx = this.context(layer);

      if (decoration == 'arc') {
        ctx.beginPath();
        ctx.strokeStyle = color;
        ctx.lineWidth = width;
        this.arcPath(layer, radius, start, stop);
        ctx.stroke();
      }

      // Looks like we're drawing an arrow
      if (decoration != 'arc') {
        // Determine Arrowhead length
        // Using width which changes according zoom factor upto a point
        var arrowHeadLengthPixels = width / 2;
        var arrowHeadLengthBp = arrowHeadLengthPixels / this.pixelsPerBp(radius);

        // If arrow head length is longer than feature length, adjust start and stop
        var featureLength = this.sequence.lengthOfRange(start, stop);
        if ( featureLength &lt; arrowHeadLengthBp ) {
          var middleBP = start + ( featureLength / 2 );
          start = middleBP - arrowHeadLengthBp / 2;
          stop = middleBP + arrowHeadLengthBp / 2;
        }

        // Set up drawing direction
        var arcStartBp = (decoration == 'clockwise-arrow') ? start : stop;
        var arrowTipBp = (decoration == 'clockwise-arrow') ? stop : start;
        var direction = (decoration == 'clockwise-arrow') ? 1 : -1;

        // Calculate important points
        var halfWidth = width / 2;
        var arcStopBp = arrowTipBp - (direction * arrowHeadLengthBp);
        var arrowTipPt = this.pointFor(arrowTipBp, radius);
        var innerArcStartPt = this.pointFor(arcStopBp, radius - halfWidth);

        // Draw arc with arrow head
        ctx.beginPath();
        ctx.fillStyle = color;
        this.arcPath(layer, radius + halfWidth, arcStartBp, arcStopBp, direction == -1);
        ctx.lineTo(arrowTipPt.x, arrowTipPt.y);
        ctx.lineTo(innerArcStartPt.x, innerArcStartPt.y);
        this.arcPath(layer, radius - halfWidth, arcStopBp, arcStartBp, direction == 1, 'noMoveTo');
        ctx.closePath();
        ctx.fill();
      }

    }

    /**
     * The method add an arc to the path. However, if the zoomFactor is very large,
     * the arc is added as a straight line.
     */
    arcPath(layer, radius, startBp, stopBp, anticlockwise=false, startType='moveTo') {
      var ctx = this.context(layer);
      var scale = this.scale;

      // Features less than 1000th the length of the sequence are drawn as straight lines
      var rangeLength = anticlockwise ? this.sequence.lengthOfRange(stopBp, startBp) : this.sequence.lengthOfRange(startBp, stopBp);
      if ( rangeLength &lt; (this.sequence.length / 1000)) {
        var p2 = this.pointFor(stopBp, radius);
        if (startType == 'lineTo') {
          var p1 = this.pointFor(startBp, radius);
          ctx.lineTo(p1.x, p1.y);
          ctx.lineTo(p2.x, p2.y);
        } else if (startType == 'moveTo') {
          var p1 = this.pointFor(startBp, radius);
          ctx.moveTo(p1.x, p1.y);
          ctx.lineTo(p2.x, p2.y);
        } else if (startType == 'noMoveTo'){
          ctx.lineTo(p2.x, p2.y);
        }
      } else {
        ctx.arc(scale.x(0), scale.y(0), radius, scale.bp(startBp), scale.bp(stopBp), anticlockwise);
      }
    }

    // drawArc(start, stop, radius, color = '#000000', width = 1) {
    //   var scale = this.scale;
    //   var ctx = this.ctx;
    //   ctx.beginPath();
    //   ctx.strokeStyle = color;
    //   ctx.lineWidth = width;
    //   ctx.arc(scale.x(0), scale.y(0), radius, scale.bp(start), scale.bp(stop), false);
    //   ctx.stroke();
    // }

    radiantLine(layer, bp, radius, length, lineWidth = 1, color = 'black') {
      var innerPt = this.pointFor(bp, radius);
      var outerPt = this.pointFor(bp, radius + length);
      // var ctx = this.ctx;
      var ctx = this.context(layer);

      ctx.beginPath();
      ctx.moveTo(innerPt.x, innerPt.y);
      ctx.lineTo(outerPt.x, outerPt.y);
      ctx.strokeStyle = color;
      ctx.lineWidth = lineWidth;
      ctx.stroke();
    }


    pointFor(bp, radius) {
      var radians = this.scale.bp(bp);
      var x = this.scale.x(0) + radius * Math.cos(radians);
      var y = this.scale.y(0) + radius * Math.sin(radians);
      return {x: x, y: y}
    }

    bpForPoint(point) {
      return Math.round( this.scale.bp.invert( CGV.angleFromPosition(point.x, point.y) ) )
    }

    visibleRangesForRadius(radius, margin = 0) {
      var angles = CGV.circleAnglesFromIntersectingRect(radius,
        this.scale.x.invert(0 - margin),
        this.scale.y.invert(0 - margin),
        this.width + margin * 2,
        this.height + margin * 2
      )
      return angles.map( (a) => { return Math.round(this.scale.bp.invert(a)) })
    }

    //TODO if undefined, see if radius is visible
    visibleRangeForRadius(radius, margin = 0) {
      var ranges = this.visibleRangesForRadius(radius, margin);
      if (ranges.length == 2) {
        // return ranges
        return new CGV.CGRange(this.sequence, ranges[0], ranges[1])
      } else if (ranges.length > 2) {
        // return [ ranges[0], ranges[ranges.length -1] ]
        return new CGV.CGRange(this.sequence, ranges[0], ranges[ranges.length -1])
      } else if ( (radius - margin) > this.maximumVisibleRadius() ) {
        return undefined
      } else if ( (radius + margin) &lt; this.minimumVisibleRadius() ) {
        return undefined
      } else {
        return new CGV.CGRange(this.sequence, 1, this.sequence.length)
      }
      // } else {
      //   return undefined
      // }
    }

    centerVisible() {
      var x = this.scale.x(0);
      var y = this.scale.y(0);
      return (x >= 0 &amp;&amp;
              x &lt;= this.width &amp;&amp;
              y >= 0 &amp;&amp;
              y &lt;= this.height)
    }

    /**
     * Return the distance between the circle center and the farthest corner of the canvas
     */
    maximumVisibleRadius() {
      // Maximum distance on x axis between circle center and the canvas 0 or width
      var maxX = Math.max( Math.abs(this.scale.x.invert(0)), Math.abs(this.scale.x.invert(this.width)) );
      // Maximum distance on y axis between circle center and the canvas 0 or height
      var maxY = Math.max( Math.abs(this.scale.y.invert(0)), Math.abs(this.scale.y.invert(this.height)) );
      // Return the hypotenuse
      return Math.sqrt( maxX * maxX + maxY * maxY)
    }

    minimumVisibleRadius() {
      if (this.centerVisible()) {
        // Center is visible so the minimum radius has to be 0
        return 0
      } else if ( CGV.oppositeSigns(this.scale.x.invert(0), this.scale.x.invert(this.width)) ) {
        // The canvas straddles 0 on the x axis, so the minimum radius is the distance to the closest horizontal line
        return Math.min( Math.abs(this.scale.y.invert(0)), Math.abs(this.scale.y.invert(this.height)))
      } else if ( CGV.oppositeSigns(this.scale.y.invert(0), this.scale.y.invert(this.height)) ) {
        // The canvas straddles 0 on the y axis, so the minimum radius is the distance to the closest vertical line
        return Math.min( Math.abs(this.scale.x.invert(0)), Math.abs(this.scale.x.invert(this.width)))
      } else {
        // Closest corner of the canvas
        // Minimum distance on x axis between circle center and the canvas 0 or width
        var minX = Math.min( Math.abs(this.scale.x.invert(0)), Math.abs(this.scale.x.invert(this.width)) );
        // Minimum distance on y axis between circle center and the canvas 0 or height
        var minY = Math.min( Math.abs(this.scale.y.invert(0)), Math.abs(this.scale.y.invert(this.height)) );
        // Return the hypotenuse
        return Math.sqrt( minX * minX + minY * minY)
      }
    }

    visibleRadii(margin) {
      return {min: this.minimumVisibleRadius(), max: this.maximumVisibleRadius()}
    }

    pixelsPerBp(radius) {
      return ( (radius * 2 * Math.PI) / this.sequence.length );
    }

    /**
     * Return the layer with the specified name (defaults to map layer)
     */
    layers(layer) {
      if (CGV.validate(layer, this._layerNames)) {
        return this._layers[layer]
      } else {
        console.error('Returning map layer by default')
        return this._layers['map']
      }
    }

    /**
     * Return the context for the specified layer (defaults to map layer)
     */
    context(layer) {
      if (CGV.validate(layer, this._layerNames)) {
        return this.layers(layer).ctx
      } else {
        console.error('Returning map layer by default')
        return this.layers('map').ctx
      }
    }

    /**
     * Return the node for the specified layer (defaults to map layer)
     */
    node(layer) {
      if (CGV.validate(layer, this._layerNames)) {
        return this.layers(layer).node
      } else {
        console.error('Returning map layer by default')
        return this.layers('map').node
      }
    }

    /**
     * This test method reduces the canvas width and height so
     * you can see how the features are reduced (not drawn) as
     * you move the map out of the visible range.
     */
    get _testDrawRange() {
      return this.__testDrawRange;
    }

    set _testDrawRange(value) {
      this.__testDrawRange = value;
      if (value) {
        this.width = this.width * 0.4;
        this.height = this.height * 0.4;
      } else {
        this.width = this.width / 0.4;
        this.height = this.height / 0.4;
      }
      this.viewer.drawFull();
    }


  }

  CGV.Canvas = Canvas;

})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Mar 24 2017 10:04:05 GMT-0600 (MDT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
