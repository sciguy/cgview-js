<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Canvas.js.html">Source: Canvas.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>//////////////////////////////////////////////////////////////////////////////
// Canvas
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {

  class Canvas {

    constructor(container, options = {}) {
      this.width = CGV.default_for(options.width, 600);
      this.height = CGV.default_for(options.height, 600);
      this.scale = {};

      // Create the viewer canvas
      // NOTE: anything drawn to the canvas must take the pixel ratio into account
      //       and should use the CGV.pixel() method.
      this.canvasNode = container.append("canvas")
        .classed('cgv-viewer', true)
        .style('border', '1px solid #DDD')
        .attr("width", this._width)
        .attr("height", this._height).node();

      // Check for canvas support
      if (!this.canvasNode.getContext) {
        container.html('&lt;h3>CGView requires Canvas, which is not supported by this browser.&lt;/h3>');
      }

      // Get pixel ratio and upscale canvas depending on screen resolution
      // http://www.html5rocks.com/en/tutorials/canvas/hidpi/
      CGV.pixel_ratio = CGV.get_pixel_ratio(this.canvasNode);
      CGV.scale_resolution(this.canvasNode, CGV.pixel_ratio);

      // Set viewer context
      this.ctx = this.canvasNode.getContext('2d');

      // Set up scales
      this.scale.x = d3.scaleLinear()
        .domain([-this.width/2, this.width/2])
        .range([0, this.width]);
      this.scale.y = d3.scaleLinear()
        .domain([this.height/2, -this.height/2])
        .range([0, this.height]);
      // this.scale.bp = d3.scaleLinear()
      //   .domain([0, this.sequence_length])
      //   .range([-1/2*Math.PI, 3/2*Math.PI]);

    }


    get width() {
      return CGV.pixel(this._width)
    }

    get height() {
      return CGV.pixel(this._height)
    }

    set width(width) {
      this._width = width;
    }

    set height(height) {
      this._height = height;
    }


    /**
     * Clear the viewer canvas
     */
    clear() {
      this.ctx.clearRect(0, 0, CGV.pixel(this.width), CGV.pixel(this.height));
    }

    /**
    * Flash a message on the center of the viewer.
    */
    flash(msg) {
      var ctx = this.ctx;
      // this.ctx.font = this.adjust_font(1.5);
      ctx.textAlign = 'center';
      ctx.textBaseline = 'center';
      var x = CGV.pixel(this.width) / 2
      var y = CGV.pixel(this.height) / 2
      ctx.fillText(msg, x, y);
    }

    drawArc(start, end, radius, color = '#000000', width = 1) {
      var scale = this.scale;
      var ctx = this.ctx;
      ctx.beginPath();
      ctx.strokeStyle = color;
      ctx.lineWidth = width;
      // this.ctx.arc(scale.x(0), scale.y(0), CGV.pixel(radius), scale.bp(start), scale.bp(end), false);
      ctx.arc(scale.x(0), scale.y(0), radius, scale.bp(start), scale.bp(end), false);
      ctx.stroke();
    }

    radiantLine(bp, radius, length, lineWidth = 1, color = 'black') {
      var radians = this.scale.bp(bp);
      var centerX = this.scale.x(0);
      var centerY = this.scale.y(0);
      var innerPt = this.pointFor(bp, radius);
      var outerPt = this.pointFor(bp, radius + length);
      var ctx = this.ctx;

      ctx.beginPath();
      ctx.moveTo(innerPt.x, innerPt.y);
      ctx.lineTo(outerPt.x, outerPt.y);
      ctx.strokeStyle = color;
      ctx.lineWidth = lineWidth;
      ctx.stroke();
    }

    pointFor(bp, radius) {
      var radians = this.scale.bp(bp);
      var x = this.scale.x(0) + radius * Math.cos(radians);
      var y = this.scale.y(0) + radius * Math.sin(radians);
      return {x: x, y: y}
    }

    bpForPoint(point) {
      return Math.round( this.scale.bp.invert( CGV.angleFromPosition(point.x, point.y) ) )
    }

    visibleRangesForRadius(radius) {
      var angles = CGV.circleAnglesFromIntersectingRect(radius,
        this.scale.x.invert(0),
        this.scale.y.invert(0),
        this.width,
        this.height
      )
      return angles.map( (a) => { return Math.round(this.scale.bp.invert(a)) })
    }

  }

  CGV.Canvas = Canvas;

})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Thu Nov 17 2016 09:10:52 GMT-0700 (MST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
