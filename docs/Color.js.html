<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ArcPlot">
            <span class="title">
                <a href="ArcPlot.html">ArcPlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ArcPlot#featureSlot"><a href="ArcPlot.html#featureSlot">featureSlot</a></li>
            
                <li data-name="ArcPlot#legendItem"><a href="ArcPlot.html#legendItem">legendItem</a></li>
            
                <li data-name="ArcPlot#viewer"><a href="ArcPlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Canvas">
            <span class="title">
                <a href="Canvas.html">Canvas</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Canvas#clear"><a href="Canvas.html#clear">clear</a></li>
            
                <li data-name="Canvas#flash"><a href="Canvas.html#flash">flash</a></li>
            
                <li data-name="Canvas#maximumVisibleRadius"><a href="Canvas.html#maximumVisibleRadius">maximumVisibleRadius</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Color">
            <span class="title">
                <a href="Color.html">Color</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Color#colorString"><a href="Color.html#colorString">colorString</a></li>
            
                <li data-name="Color#colorString"><a href="Color.html#colorString">colorString</a></li>
            
                <li data-name="Color#rawColor"><a href="Color.html#rawColor">rawColor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Color.hexToRgba"><a href="Color.html#.hexToRgba">hexToRgba</a></li>
            
                <li data-name="Color.hexToRgba"><a href="Color.html#.hexToRgba">hexToRgba</a></li>
            
                <li data-name="Color.hslToRgba"><a href="Color.html#.hslToRgba">hslToRgba</a></li>
            
                <li data-name="Color.nameToRgba"><a href="Color.html#.nameToRgba">nameToRgba</a></li>
            
                <li data-name="Color.rgbToRgba"><a href="Color.html#.rgbToRgba">rgbToRgba</a></li>
            
                <li data-name="Color#toString"><a href="Color.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ColorPicker">
            <span class="title">
                <a href="ColorPicker.html">ColorPicker</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ColorPicker#_configureView"><a href="ColorPicker.html#_configureView">_configureView</a></li>
            
                <li data-name="ColorPicker#alphaListener"><a href="ColorPicker.html#alphaListener">alphaListener</a></li>
            
                <li data-name="ColorPicker#dialogListener"><a href="ColorPicker.html#dialogListener">dialogListener</a></li>
            
                <li data-name="ColorPicker#doneListener"><a href="ColorPicker.html#doneListener">doneListener</a></li>
            
                <li data-name="ColorPicker#enableDragging"><a href="ColorPicker.html#enableDragging">enableDragging</a></li>
            
                <li data-name="ColorPicker#originalColorListener"><a href="ColorPicker.html#originalColorListener">originalColorListener</a></li>
            
                <li data-name="ColorPicker#pickerListener"><a href="ColorPicker.html#pickerListener">pickerListener</a></li>
            
                <li data-name="ColorPicker#slideListener"><a href="ColorPicker.html#slideListener">slideListener</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Feature">
            <span class="title">
                <a href="Feature.html">Feature</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Feature#color"><a href="Feature.html#color">color</a></li>
            
                <li data-name="Feature#decoration"><a href="Feature.html#decoration">decoration</a></li>
            
                <li data-name="Feature#featureSlot"><a href="Feature.html#featureSlot">featureSlot</a></li>
            
                <li data-name="Feature#legendItem"><a href="Feature.html#legendItem">legendItem</a></li>
            
                <li data-name="Feature#opacity"><a href="Feature.html#opacity">opacity</a></li>
            
                <li data-name="Feature#start"><a href="Feature.html#start">start</a></li>
            
                <li data-name="Feature#stop"><a href="Feature.html#stop">stop</a></li>
            
                <li data-name="Feature#viewer"><a href="Feature.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="FeatureSlot">
            <span class="title">
                <a href="FeatureSlot.html">FeatureSlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="FeatureSlot#viewer"><a href="FeatureSlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Font">
            <span class="title">
                <a href="Font.html">Font</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Font#css"><a href="Font.html#css">css</a></li>
            
                <li data-name="Font#family"><a href="Font.html#family">family</a></li>
            
                <li data-name="Font#height"><a href="Font.html#height">height</a></li>
            
                <li data-name="Font#size"><a href="Font.html#size">size</a></li>
            
                <li data-name="Font#string"><a href="Font.html#string">string</a></li>
            
                <li data-name="Font#style"><a href="Font.html#style">style</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Font.calculateWidths"><a href="Font.html#.calculateWidths">calculateWidths</a></li>
            
                <li data-name="Font#toString"><a href="Font.html#toString">toString</a></li>
            
                <li data-name="Font#width"><a href="Font.html#width">width</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IO">
            <span class="title">
                <a href="IO.html">IO</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IO#load_json"><a href="IO.html#load_json">load_json</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LegendItem">
            <span class="title">
                <a href="LegendItem.html">LegendItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LegendItem#drawSwatch"><a href="LegendItem.html#drawSwatch">drawSwatch</a></li>
            
                <li data-name="LegendItem#font"><a href="LegendItem.html#font">font</a></li>
            
                <li data-name="LegendItem#fontColor"><a href="LegendItem.html#fontColor">fontColor</a></li>
            
                <li data-name="LegendItem#legend"><a href="LegendItem.html#legend">legend</a></li>
            
                <li data-name="LegendItem#swatchColor"><a href="LegendItem.html#swatchColor">swatchColor</a></li>
            
                <li data-name="LegendItem#swatchOpacity"><a href="LegendItem.html#swatchOpacity">swatchOpacity</a></li>
            
                <li data-name="LegendItem#swatchOpacity"><a href="LegendItem.html#swatchOpacity">swatchOpacity</a></li>
            
                <li data-name="LegendItem#text"><a href="LegendItem.html#text">text</a></li>
            
                <li data-name="LegendItem#textAlignment"><a href="LegendItem.html#textAlignment">textAlignment</a></li>
            
                <li data-name="LegendItem#viewer"><a href="LegendItem.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ruler">
            <span class="title">
                <a href="Ruler.html">Ruler</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Viewer#backboneRadius"><a href="Viewer.html#backboneRadius">backboneRadius</a></li>
            
                <li data-name="Viewer#height"><a href="Viewer.html#height">height</a></li>
            
                <li data-name="Viewer#sequenceLength"><a href="Viewer.html#sequenceLength">sequenceLength</a></li>
            
                <li data-name="Viewer#width"><a href="Viewer.html#width">width</a></li>
            
                <li data-name="Viewer#zoomFactor"><a href="Viewer.html#zoomFactor">zoomFactor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#addBp"><a href="Viewer.html#addBp">addBp</a></li>
            
                <li data-name="Viewer#arcPlots"><a href="Viewer.html#arcPlots">arcPlots</a></li>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#features"><a href="Viewer.html#features">features</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
                <li data-name="Viewer#subtractBp"><a href="Viewer.html#subtractBp">subtractBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Color.js.html">Source: Color.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>//////////////////////////////////////////////////////////////////////////////
// Color
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {

  class Color {

    /**
     * The Color class is meant to contain colors in a consistant manner as
     * well as the opacity. Colors are stored internally as an RGBA string for
     * quick access as a CSS/Canvas compatibily string.
     * The colorString can be in these formats: ...
     */
    constructor(color, options = {}) {
      this.rawColor = color;
    }

    /**
     * Return the class name as a string.
     * @return {String} - 'Color'
     */
    toString() {
      return 'Color';
    }

    /**
     * Set the color using, RGB, RGBA, Hex, etc String, or RGB/A, HSV object
     */
    set rawColor(color) {
      if (typeof color === 'string' || color instanceof String) {
        this.colorString = color;
      } else {
        var keys = new CGV.CGArray(Object.keys(color));
        if (keys.contains('h') &amp;&amp; keys.contains('s') &amp;&amp; keys.contains('v')) {
          this.hsv = color;
        } else if (keys.contains('r') &amp;&amp; keys.contains('g') &amp;&amp; keys.contains('b') &amp;&amp; keys.contains('a')) {
          this.rgba = color;
        } else if (keys.contains('r') &amp;&amp; keys.contains('g') &amp;&amp; keys.contains('b')) {
          this.rgb = color;
        }
      }
    }


    /**
     * Return the color as an RGBA string.
     */
    get colorString() {
      return this._rgbaString
    }

    /**
     * Set the color using, RGB, RGBA, Hex, etc String
     */
    set colorString(value) {
      this._rgbaString = Color.convertToRgba(value, this.opacity);
      this._updateOpacityFromRgba();
    }


    get opacity() {
      return (this._opacity == undefined) ? 1 : this._opacity;
    }

    set opacity(value) {
      this._opacity = value;
      this._updateRgbaOpacity();
    }

    get rgbaString() {
      return this._rgbaString;
    }

    get rgbString() {
      return Color.rgbToString(this.rgb);
    }

    get rgb() {
      var result = /^rgba\((\d+),(\d+),(\d+)/.exec(this.rgbaString);
      return result ? { r: Number(result[1]), g: Number(result[2]), b: Number(result[3]) } : undefined
    }

    set rgb(value) {
      this.colorString = Color.rgbToString(value);
      this._updateOpacityFromRgba();
    }

    get rgba() {
      var result = /^rgba\((\d+),(\d+),(\d+),([\d\.]+)/.exec(this.rgbaString);
      return result ? { r: Number(result[1]), g: Number(result[2]), b: Number(result[3]), a: Number(result[4]) } : undefined
    }

    set rgba(value) {
      this.colorString = Color.rgbaToString(value);
      this._updateOpacityFromRgba();
    }

    set hsv(value) {
      var rgba = Color.hsv2rgb(value); 
      rgba.a = this.opacity;
      this.rgba = rgba;
    }

    get hsv() {
      return Color.rgb2hsv(this.rgb)
    }

    get hex() {
    }

    get hla() {
    }

    _updateRgbaOpacity() {
      this._rgbaString = this._rgbaString.replace(/^(rgba\(.*,)([\d\.]+?)(\))/, (m, left, opacity, right) => {
        return left + this.opacity + right;
      });
    }

    _updateOpacityFromRgba() {
      var result = /^rgba.*,([\d\.]+?)\)$/.exec(this.rgbaString);
      if (result) {
        this._opacity = Number(result[1]);
      }
    }

  }

  /**
   * Convert a legal color value to RGBA. See http://www.w3schools.com/cssref/css_colors_legal.asp
   * @function hexToRgba
   * @memberof Color
   * @param {String} value - *value* can be a hexidecimal, HSL, RGB, or name.
   * @param {Number} opacity - a number between 0 and 1.
   * @return {String} The color as RGBA.
   * @static
   */
  Color.convertToRgba = function(value, opacity = 1) {
    if ( /^#/.test(value) ) {
      return Color.hexToRgba(value, opacity)
    } else if ( /^rgb\(/.test(value) ) {
      return Color.rgbToRgba(value, opacity)
    } else if ( /^rgba\(/.test(value) ) {
      // Remove spaces
      return value.replace(/ +/g, '')
    } else if ( /^hsl\(/.test(value) ) {
      return Color.hslToRgba(value, opacity)
    } else {
      return Color.nameToRgba(value, opacity)
    }
  }

  /**
   * Convert a named color to RGBA.
   * @function nameToRgba
   * @memberof Color
   * @param {String} name - *name* should be one of the blah blah on website
   * @param {Number} opacity - a number between 0 and 1.
   * @return {String} The color as RGBA.
   * @static
   */
  Color.nameToRgba = function(name, opacity = 1) {
    name = name.toLowerCase();
    if (name == 'white') {
      return Color.rgbToRgba('rgb(255,255,255)', opacity);
    } else if (name == 'black') {
      return Color.rgbToRgba('rgb(0,0,0)', opacity);
    }
  }

  /**
   * Convert an RGB color to RGBA.
   * @function rgbToRgba
   * @memberof Color
   * @param {String} rgb - *rgb* should take the form of 'rgb(red,green,blue)', where red, green and blue are numbers between 0 and 255.
   * @param {Number} opacity - a number between 0 and 1.
   * @return {String} The color as RGBA.
   * @static
   */
  Color.rgbToRgba = function(rgb, opacity = 1) {
    // Remove spaces
    rgb = rgb.replace(/ +/g, '');
    rgb = rgb.replace('rgb', 'rgba');
    return rgb.replace(')', ',' + opacity + ')')
  }

  /**
   * Convert an HSL color to RGBA.
   * @function hslToRgba
   * @memberof Color
   * @param {String} hsl - *hsl* values should be NOT Implemented yet
   * @param {Number} opacity - a number between 0 and 1.
   * @return {String} The color as RGBA.
   * @static
   */
  Color.hslToRgba = function(hsl) {
  }

  /**
   * Convert RGB representation to HSV.
   * r, g, b can be either in &lt;0,1> range or &lt;0,255> range.
   * Credits to http://www.raphaeljs.com
   */
  Color.rgb2hsv = function(rgb) {

    var r = rgb.r;
    var g = rgb.g;
    var b = rgb.b;

    if (r > 1 || g > 1 || b > 1) {
      r /= 255;
      g /= 255;
      b /= 255;
    }

    var H, S, V, C;
    V = Math.max(r, g, b);
    C = V - Math.min(r, g, b);
    H = (C == 0 ? null :
         V == r ? (g - b) / C + (g &lt; b ? 6 : 0) :
         V == g ? (b - r) / C + 2 :
                  (r - g) / C + 4);
    H = (H % 6) * 60;
    S = C == 0 ? 0 : C / V;
    return { h: H, s: S, v: V };
  }

  /**
   * Convert HSV representation to RGB HEX string.
   * Credits to http://www.raphaeljs.com
   */
  Color.hsv2rgb = function(hsv) {
    var R, G, B, X, C;
    var h = (hsv.h % 360) / 60;

    C = hsv.v * hsv.s;
    X = C * (1 - Math.abs(h % 2 - 1));
    R = G = B = hsv.v - C;

    h = ~~h;
    R += [C, X, 0, 0, X, C][h];
    G += [X, C, C, X, 0, 0][h];
    B += [0, 0, X, C, C, X][h];

    var r = Math.floor(R * 255);
    var g = Math.floor(G * 255);
    var b = Math.floor(B * 255);
    return { r: r, g: g, b: b };
  }

  // Adapted from:
  // http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb
  // Expand shorthand form (e.g. "03F") to full form (e.g. "0033FF")
  /**
   * Convert a Hexidecimal color to RGBA.
   * @function hexToRgba
   * @memberof Color
   * @param {String} hex - *hex* can be shorthand (e.g. "03F") or fullform (e.g. "0033FF"), with or without the starting '#'.
   * @param {Number} opacity - a number between 0 and 1.
   * @return {String} The color as RGBA.
   * @static
   */
  Color.hexToRgba = function(hex, opacity) {
    var shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
    hex = hex.replace(shorthandRegex, function(m, r, g, b) {
      return r + r + g + g + b + b;
    });
    // Defaults:
    var red = 0;
    var green = 0;
    var blue = 0;
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    if (result) {
      red = parseInt(result[1], 16);
      green = parseInt(result[2], 16);
      blue = parseInt(result[3], 16);
    }
    // return "rgba(" + red + "," + green + "," + blue + "," + opacity +  ")"
    return { r: red, g: green, b: blue, a: opacity }
  }

  Color.rgbaToString = function(rgba) {
    return 'rgba(' + rgba.r + ','+ rgba.g + ','  + rgba.b + ',' + rgba.a + ')'
  }

  Color.rgbToString = function(rgb) {
    return 'rgb(' + rgb.r + ','+ rgb.g + ','  + rgb.b + ')'
  }

  CGV.Color = Color;

})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Dec 06 2016 16:21:46 GMT-0700 (MST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
