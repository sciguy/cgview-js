<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ArcPlot">
            <span class="title">
                <a href="ArcPlot.html">ArcPlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ArcPlot#featureSlot"><a href="ArcPlot.html#featureSlot">featureSlot</a></li>
            
                <li data-name="ArcPlot#legendItem"><a href="ArcPlot.html#legendItem">legendItem</a></li>
            
                <li data-name="ArcPlot#viewer"><a href="ArcPlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Canvas">
            <span class="title">
                <a href="Canvas.html">Canvas</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Canvas#clear"><a href="Canvas.html#clear">clear</a></li>
            
                <li data-name="Canvas#flash"><a href="Canvas.html#flash">flash</a></li>
            
                <li data-name="Canvas#maximumVisibleRadius"><a href="Canvas.html#maximumVisibleRadius">maximumVisibleRadius</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Color">
            <span class="title">
                <a href="Color.html">Color</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Color#colorString"><a href="Color.html#colorString">colorString</a></li>
            
                <li data-name="Color#colorString"><a href="Color.html#colorString">colorString</a></li>
            
                <li data-name="Color#rawColor"><a href="Color.html#rawColor">rawColor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Color.hexToRgba"><a href="Color.html#.hexToRgba">hexToRgba</a></li>
            
                <li data-name="Color.hexToRgba"><a href="Color.html#.hexToRgba">hexToRgba</a></li>
            
                <li data-name="Color.hslToRgba"><a href="Color.html#.hslToRgba">hslToRgba</a></li>
            
                <li data-name="Color.nameToRgba"><a href="Color.html#.nameToRgba">nameToRgba</a></li>
            
                <li data-name="Color.rgbToRgba"><a href="Color.html#.rgbToRgba">rgbToRgba</a></li>
            
                <li data-name="Color#toString"><a href="Color.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ColorPicker">
            <span class="title">
                <a href="ColorPicker.html">ColorPicker</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ColorPicker#_configureView"><a href="ColorPicker.html#_configureView">_configureView</a></li>
            
                <li data-name="ColorPicker#alphaListener"><a href="ColorPicker.html#alphaListener">alphaListener</a></li>
            
                <li data-name="ColorPicker#dialogListener"><a href="ColorPicker.html#dialogListener">dialogListener</a></li>
            
                <li data-name="ColorPicker#doneListener"><a href="ColorPicker.html#doneListener">doneListener</a></li>
            
                <li data-name="ColorPicker#enableDragging"><a href="ColorPicker.html#enableDragging">enableDragging</a></li>
            
                <li data-name="ColorPicker#originalColorListener"><a href="ColorPicker.html#originalColorListener">originalColorListener</a></li>
            
                <li data-name="ColorPicker#pickerListener"><a href="ColorPicker.html#pickerListener">pickerListener</a></li>
            
                <li data-name="ColorPicker#slideListener"><a href="ColorPicker.html#slideListener">slideListener</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Feature">
            <span class="title">
                <a href="Feature.html">Feature</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Feature#color"><a href="Feature.html#color">color</a></li>
            
                <li data-name="Feature#decoration"><a href="Feature.html#decoration">decoration</a></li>
            
                <li data-name="Feature#featureSlot"><a href="Feature.html#featureSlot">featureSlot</a></li>
            
                <li data-name="Feature#legendItem"><a href="Feature.html#legendItem">legendItem</a></li>
            
                <li data-name="Feature#opacity"><a href="Feature.html#opacity">opacity</a></li>
            
                <li data-name="Feature#start"><a href="Feature.html#start">start</a></li>
            
                <li data-name="Feature#stop"><a href="Feature.html#stop">stop</a></li>
            
                <li data-name="Feature#viewer"><a href="Feature.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="FeatureSlot">
            <span class="title">
                <a href="FeatureSlot.html">FeatureSlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="FeatureSlot#viewer"><a href="FeatureSlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Font">
            <span class="title">
                <a href="Font.html">Font</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Font#css"><a href="Font.html#css">css</a></li>
            
                <li data-name="Font#family"><a href="Font.html#family">family</a></li>
            
                <li data-name="Font#height"><a href="Font.html#height">height</a></li>
            
                <li data-name="Font#size"><a href="Font.html#size">size</a></li>
            
                <li data-name="Font#string"><a href="Font.html#string">string</a></li>
            
                <li data-name="Font#style"><a href="Font.html#style">style</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Font.calculateWidths"><a href="Font.html#.calculateWidths">calculateWidths</a></li>
            
                <li data-name="Font#toString"><a href="Font.html#toString">toString</a></li>
            
                <li data-name="Font#width"><a href="Font.html#width">width</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IO">
            <span class="title">
                <a href="IO.html">IO</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IO#load_json"><a href="IO.html#load_json">load_json</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LegendItem">
            <span class="title">
                <a href="LegendItem.html">LegendItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LegendItem#drawSwatch"><a href="LegendItem.html#drawSwatch">drawSwatch</a></li>
            
                <li data-name="LegendItem#font"><a href="LegendItem.html#font">font</a></li>
            
                <li data-name="LegendItem#fontColor"><a href="LegendItem.html#fontColor">fontColor</a></li>
            
                <li data-name="LegendItem#legend"><a href="LegendItem.html#legend">legend</a></li>
            
                <li data-name="LegendItem#swatchColor"><a href="LegendItem.html#swatchColor">swatchColor</a></li>
            
                <li data-name="LegendItem#swatchOpacity"><a href="LegendItem.html#swatchOpacity">swatchOpacity</a></li>
            
                <li data-name="LegendItem#swatchOpacity"><a href="LegendItem.html#swatchOpacity">swatchOpacity</a></li>
            
                <li data-name="LegendItem#text"><a href="LegendItem.html#text">text</a></li>
            
                <li data-name="LegendItem#textAlignment"><a href="LegendItem.html#textAlignment">textAlignment</a></li>
            
                <li data-name="LegendItem#viewer"><a href="LegendItem.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ruler">
            <span class="title">
                <a href="Ruler.html">Ruler</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Viewer#backboneRadius"><a href="Viewer.html#backboneRadius">backboneRadius</a></li>
            
                <li data-name="Viewer#height"><a href="Viewer.html#height">height</a></li>
            
                <li data-name="Viewer#sequenceLength"><a href="Viewer.html#sequenceLength">sequenceLength</a></li>
            
                <li data-name="Viewer#width"><a href="Viewer.html#width">width</a></li>
            
                <li data-name="Viewer#zoomFactor"><a href="Viewer.html#zoomFactor">zoomFactor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#addBp"><a href="Viewer.html#addBp">addBp</a></li>
            
                <li data-name="Viewer#arcPlots"><a href="Viewer.html#arcPlots">arcPlots</a></li>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#features"><a href="Viewer.html#features">features</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
                <li data-name="Viewer#subtractBp"><a href="Viewer.html#subtractBp">subtractBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Font.js.html">Source: Font.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>//////////////////////////////////////////////////////////////////////////////
// Font
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {

  /**
   * The *Font* class stores the font internally as a CSS font string but makes it
   * easy to change individual components of the font. For example, the size can be
   * changed using the [size]{@link Font#size} method. A font consists of 3 components:
   *
   *   Component   | Description
   *   ------------|---------------
   *   *family*    | This can be a generic family (e.g. Serif, Sans-serif, Monospace) or a specific font family (e.g. Times New Roman, Arail, or Courier)
   *   *style*     | One of *plain*, *bold*, *italic*, or *bold-italic*
   *   *size*      | The size of the font in pixels. The size will be adjusted for retina displays.
   *
   */
  class Font {

    /**
     * Create a new *Font*. The *Font* can be created using a string or an object representing the font.
     *
     * @param {(String|Object)} font - If a string is provided, it must have the following format:
     *   family,style,size (e.g. 'Serif,plain,12'). If an object is provided, it must have a *family*,
     *   *style* and *size* property (e.g. { family: 'Serif', style: 'plain', size: 12 })
     */
    constructor(font) {
      this._rawFont = font;
    }

    /**
     * Return the class name as a string.
     * @return {String} - 'Font'
     */
    toString() {
      return 'Font';
    }

    set _rawFont(font) {
      if (typeof font === 'string' || font instanceof String) {
        this.string = font;
      } else {
        var keys = new CGV.CGArray(Object.keys(font));
        if (keys.contains('family') &amp;&amp; keys.contains('style') &amp;&amp; keys.contains('size')) {
          this.family = font.family;
          this.style = font.style;
          this.size = font.size;
        } else {
          console.log('Font objects require the following keys: family, style, and size');
        }
      }
    }

    /**
     * @member {String} - Get or set the font using a simple string format: family,style,size (e.g. 'Serif,plain,12').
     */
    get string() {
      return this.family + ',' + this.style + ',' + this.size
    }

    set string(value) {
      value = value.replace(/ +/g, '');
      var parts = value.split(',');
      if (parts.length == 3) {
        this.family = parts[0];
        this.style = parts[1];
        this.size = parts[2];
      } else {
        console.log('Font must have 3 parts')
      }
      this._generateFont();
    }

    // /** * Return the font as canvas usable string.
    //  */
    // get font() {
    //   return this._font
    // }
    //
    // /**
    //  * Set the font using a string with the format: font-family,style,size
    //  */
    // set font(value) {
    //   value = value.replace(/ +/g, '');
    //   var parts = value.split(',');
    //   if (parts.length == 3) {
    //     this.family = parts[0];
    //     this.style = parts[1];
    //     this.size = Number(parts[2]);
    //   } else {
    //     console.log('Font must have 3 parts')
    //   }
    //   this._generateFont();
    // }

    /**
     * @member {String} - Return the font as CSS usable string. This is also how the font is stored internally for quick access.
     */
    get css() {
      return this._font
    }

    /**
     * @member {String} - Get or set the font family. Defaults to *Arial*.
     */
    get family() {
      return this._family || 'arial'
    }

    set family(value) {
      this._family = value;
      this._generateFont();
    }

    /**
     * @member {Number} - Get or set the font size. The size is stored as a number and is in pixels.
     * The actual value may be altered when setting it to take into account the pixel
     * ratio of the screen. Defaults to *12*.
     */
    get size() {
      return this._size || CGV.pixel(12)
    }

    set size(value) {
      this._size = CGV.pixel(Number(value));
      this._generateFont();
    }

    /**
     * @member {String} - Get or set the font style. The possible values are *plain*, *bold*, *italic* and
     * *bold-italic*. Defaults to *plain*.
     */
    get style() {
      return this._style || 'plain'
    }

    set style(value) {
      this._style = value;
      this._generateFont();
    }

    /**
     * @member {Number} - Get the font height. This will be the same as the font [size]{@link Font#size}.
     */
    get height() {
      return this.size
    }


    /**
     * Measure the width of the supplied *text* using the *context* and the *Font* settings.
     *
     * @param {Context} context - The canvas context to use to measure the width.
     * @param {String} text - The text to measure.
     * @return {Number} - The width of the *text* in pixels.
     */
    width(ctx, text) {
      ctx.font = this.font;
      return ctx.measureText(text).width
    }

    _styleAsCss() {
      if (this.style == 'plain') {
        return 'normal'
      } else if (this.style == 'bold') {
        return 'bold'
      } else if (this.style == 'italic') {
        return 'italic'
      } else if (this.style == 'bold-italic') {
        return 'italic bold'
      } else {
        return ''
      }
    }

    _generateFont() {
      this._font = this._styleAsCss() + ' ' + this.size + 'px ' + this.family;
    }

  }

  /**
   * Calculate the width of multiple *strings* using the supplied *fonts* and *context*.
   * This method minimized the number of times the context font is changed to speed up
   * the calculations
   * @function calculateWidths
   * @memberof Font
   * @static
   * @param {Context} ctx - The context to use for measurements.
   * @param {Font[]} fonts - An array of fonts. Must be the same length as *strings*.
   * @param {String[]} strings - An array of strings. Must be the same length as *fonts*.
   * @return {Number[]} - An array of widths.
   */
  Font.calculateWidths = function(ctx, fonts, strings) {
    ctx.save();
    var widths = [];
    var map = [];

    for (var i = 0, len = fonts.length; i &lt; len; i++) {
      map.push({
        index: i,
        font: fonts[i],
        text: strings[i]
      });
    }

    map.sort( (a,b) => {
      return a.font > b.font ? 1 : -1;
    });

    var currentFont = ''
    var font;
    for (var i = 0, len = map.length; i &lt; len; i++) {
      font = map[i].font;
      text = map[i].text;
      if (font != currentFont) {
        ctx.font = font;
        currentFont = font;
      }
      widths[i] = ctx.measureText(text).width;
    }
    ctx.restore();
    return widths
  }

  CGV.Font = Font;

})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Dec 06 2016 16:21:46 GMT-0700 (MST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
