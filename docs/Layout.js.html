<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>

<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-nav" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">CGView.js</a>
    </div>
		<div class="collapse navbar-collapse" id="main-nav">
			<ul class="nav navbar-nav">
				<li><a href="../viewer.html">Demo</a></li>
				<li class="active"><a href="#">Docs</a></li>
        <li><a href="json_format.html">JSON</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="basic_map.html">Basic Map</a></li>
            <li><a href="sequence_map.html">Sequence Map</a></li>
            <li><a href="json_map.html">JSON Map</a></li>
          </ul>
        </li>
			</ul>
    </div>
	</div>
</div>


<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="Annotation">
            <span class="title">
                <a href="Annotation.html">Annotation</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Annotation#color"><a href="Annotation.html#color">color</a></li>
            
                <li data-name="Annotation#font"><a href="Annotation.html#font">font</a></li>
            
                <li data-name="Annotation#labelLineLength"><a href="Annotation.html#labelLineLength">labelLineLength</a></li>
            
                <li data-name="Annotation#length"><a href="Annotation.html#length">length</a></li>
            
                <li data-name="Annotation#priorityMax"><a href="Annotation.html#priorityMax">priorityMax</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Annotation#addLabel"><a href="Annotation.html#addLabel">addLabel</a></li>
            
                <li data-name="Annotation#labels"><a href="Annotation.html#labels">labels</a></li>
            
                <li data-name="Annotation#removeLabels"><a href="Annotation.html#removeLabels">removeLabels</a></li>
            
                <li data-name="Annotation#toString"><a href="Annotation.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Backbone">
            <span class="title">
                <a href="Backbone.html">Backbone</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Backbone#adjustedCenterOffset"><a href="Backbone.html#adjustedCenterOffset">adjustedCenterOffset</a></li>
            
                <li data-name="Backbone#adjustedThickness"><a href="Backbone.html#adjustedThickness">adjustedThickness</a></li>
            
                <li data-name="Backbone#bpThicknessAddition"><a href="Backbone.html#bpThicknessAddition">bpThicknessAddition</a></li>
            
                <li data-name="Backbone#centerOffset"><a href="Backbone.html#centerOffset">centerOffset</a></li>
            
                <li data-name="Backbone#color"><a href="Backbone.html#color">color</a></li>
            
                <li data-name="Backbone#maxThickness"><a href="Backbone.html#maxThickness">maxThickness</a></li>
            
                <li data-name="Backbone#thickness"><a href="Backbone.html#thickness">thickness</a></li>
            
                <li data-name="Backbone#visibleRange"><a href="Backbone.html#visibleRange">visibleRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Backbone#maxZoomFactor"><a href="Backbone.html#maxZoomFactor">maxZoomFactor</a></li>
            
                <li data-name="Backbone#pixelsPerBp"><a href="Backbone.html#pixelsPerBp">pixelsPerBp</a></li>
            
                <li data-name="Backbone#toString"><a href="Backbone.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Canvas">
            <span class="title">
                <a href="Canvas.html">Canvas</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Canvas#_testDrawRange"><a href="Canvas.html#_testDrawRange">_testDrawRange</a></li>
            
                <li data-name="Canvas#layerNames"><a href="Canvas.html#layerNames">layerNames</a></li>
            
                <li data-name="Canvas#layout"><a href="Canvas.html#layout">layout</a></li>
            
                <li data-name="Canvas#scale"><a href="Canvas.html#scale">scale</a></li>
            
                <li data-name="Canvas#sequence"><a href="Canvas.html#sequence">sequence</a></li>
            
                <li data-name="Canvas#viewer"><a href="Canvas.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Canvas#arcPath"><a href="Canvas.html#arcPath">arcPath</a></li>
            
                <li data-name="Canvas#clear"><a href="Canvas.html#clear">clear</a></li>
            
                <li data-name="Canvas#context"><a href="Canvas.html#context">context</a></li>
            
                <li data-name="Canvas#drawArc"><a href="Canvas.html#drawArc">drawArc</a></li>
            
                <li data-name="Canvas#layers"><a href="Canvas.html#layers">layers</a></li>
            
                <li data-name="Canvas#node"><a href="Canvas.html#node">node</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Caption">
            <span class="title">
                <a href="Caption.html">Caption</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Caption#backgroundColor"><a href="Caption.html#backgroundColor">backgroundColor</a></li>
            
                <li data-name="Caption#ctx"><a href="Caption.html#ctx">ctx</a></li>
            
                <li data-name="Caption#font"><a href="Caption.html#font">font</a></li>
            
                <li data-name="Caption#fontColor"><a href="Caption.html#fontColor">fontColor</a></li>
            
                <li data-name="Caption#id"><a href="Caption.html#id">id</a></li>
            
                <li data-name="Caption#items"><a href="Caption.html#items">items</a></li>
            
                <li data-name="Caption#name"><a href="Caption.html#name">name</a></li>
            
                <li data-name="Caption#position"><a href="Caption.html#position">position</a></li>
            
                <li data-name="Caption#textAlignment"><a href="Caption.html#textAlignment">textAlignment</a></li>
            
                <li data-name="Caption#viewer"><a href="Caption.html#viewer">viewer</a></li>
            
                <li data-name="Caption#visibleItems"><a href="Caption.html#visibleItems">visibleItems</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Caption#refresh"><a href="Caption.html#refresh">refresh</a></li>
            
                <li data-name="Caption#toString"><a href="Caption.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CaptionItem">
            <span class="title">
                <a href="CaptionItem.html">CaptionItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="CaptionItem#caption"><a href="CaptionItem.html#caption">caption</a></li>
            
                <li data-name="CaptionItem#font"><a href="CaptionItem.html#font">font</a></li>
            
                <li data-name="CaptionItem#fontColor"><a href="CaptionItem.html#fontColor">fontColor</a></li>
            
                <li data-name="CaptionItem#height"><a href="CaptionItem.html#height">height</a></li>
            
                <li data-name="CaptionItem#id"><a href="CaptionItem.html#id">id</a></li>
            
                <li data-name="CaptionItem#name"><a href="CaptionItem.html#name">name</a></li>
            
                <li data-name="CaptionItem#parent"><a href="CaptionItem.html#parent">parent</a></li>
            
                <li data-name="CaptionItem#textAlignment"><a href="CaptionItem.html#textAlignment">textAlignment</a></li>
            
                <li data-name="CaptionItem#width"><a href="CaptionItem.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CaptionItem#toString"><a href="CaptionItem.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CGArray">
            <span class="title">
                <a href="CGArray.html">CGArray</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CGArray#attr"><a href="CGArray.html#attr">attr</a></li>
            
                <li data-name="CGArray#attr"><a href="CGArray.html#attr">attr</a></li>
            
                <li data-name="CGArray#each"><a href="CGArray.html#each">each</a></li>
            
                <li data-name="CGArray#each"><a href="CGArray.html#each">each</a></li>
            
                <li data-name="CGArray#empty"><a href="CGArray.html#empty">empty</a></li>
            
                <li data-name="CGArray#empty"><a href="CGArray.html#empty">empty</a></li>
            
                <li data-name="CGArray#get"><a href="CGArray.html#get">get</a></li>
            
                <li data-name="CGArray#get"><a href="CGArray.html#get">get</a></li>
            
                <li data-name="CGArray#merge"><a href="CGArray.html#merge">merge</a></li>
            
                <li data-name="CGArray#move"><a href="CGArray.html#move">move</a></li>
            
                <li data-name="CGArray#move"><a href="CGArray.html#move">move</a></li>
            
                <li data-name="CGArray#present"><a href="CGArray.html#present">present</a></li>
            
                <li data-name="CGArray#present"><a href="CGArray.html#present">present</a></li>
            
                <li data-name="CGArray#remove"><a href="CGArray.html#remove">remove</a></li>
            
                <li data-name="CGArray#remove"><a href="CGArray.html#remove">remove</a></li>
            
                <li data-name="CGArray#toString"><a href="CGArray.html#toString">toString</a></li>
            
                <li data-name="CGArray#toString"><a href="CGArray.html#toString">toString</a></li>
            
                <li data-name="CGArray#unique"><a href="CGArray.html#unique">unique</a></li>
            
                <li data-name="CGArray#unique"><a href="CGArray.html#unique">unique</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CGObject">
            <span class="title">
                <a href="CGObject.html">CGObject</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="CGObject#canvas"><a href="CGObject.html#canvas">canvas</a></li>
            
                <li data-name="CGObject#layout"><a href="CGObject.html#layout">layout</a></li>
            
                <li data-name="CGObject#meta"><a href="CGObject.html#meta">meta</a></li>
            
                <li data-name="CGObject#sequence"><a href="CGObject.html#sequence">sequence</a></li>
            
                <li data-name="CGObject#viewer"><a href="CGObject.html#viewer">viewer</a></li>
            
                <li data-name="CGObject#visible"><a href="CGObject.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CGObject#toString"><a href="CGObject.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="CGRange">
            <span class="title">
                <a href="CGRange.html">CGRange</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="CGRange#length"><a href="CGRange.html#length">length</a></li>
            
                <li data-name="CGRange#middle"><a href="CGRange.html#middle">middle</a></li>
            
                <li data-name="CGRange#sequence"><a href="CGRange.html#sequence">sequence</a></li>
            
                <li data-name="CGRange#sequenceLength"><a href="CGRange.html#sequenceLength">sequenceLength</a></li>
            
                <li data-name="CGRange#start"><a href="CGRange.html#start">start</a></li>
            
                <li data-name="CGRange#stop"><a href="CGRange.html#stop">stop</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="CGRange#contains"><a href="CGRange.html#contains">contains</a></li>
            
                <li data-name="CGRange#copy"><a href="CGRange.html#copy">copy</a></li>
            
                <li data-name="CGRange#getStartPlus"><a href="CGRange.html#getStartPlus">getStartPlus</a></li>
            
                <li data-name="CGRange#getStopPlus"><a href="CGRange.html#getStopPlus">getStopPlus</a></li>
            
                <li data-name="CGRange#isFullCircle"><a href="CGRange.html#isFullCircle">isFullCircle</a></li>
            
                <li data-name="CGRange#mergeWithRange"><a href="CGRange.html#mergeWithRange">mergeWithRange</a></li>
            
                <li data-name="CGRange#normalize"><a href="CGRange.html#normalize">normalize</a></li>
            
                <li data-name="CGRange#overHalfCircle"><a href="CGRange.html#overHalfCircle">overHalfCircle</a></li>
            
                <li data-name="CGRange#overlapsRange"><a href="CGRange.html#overlapsRange">overlapsRange</a></li>
            
                <li data-name="CGRange#spansOrigin"><a href="CGRange.html#spansOrigin">spansOrigin</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Color">
            <span class="title">
                <a href="Color.html">Color</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Color#hsv"><a href="Color.html#hsv">hsv</a></li>
            
                <li data-name="Color#opacity"><a href="Color.html#opacity">opacity</a></li>
            
                <li data-name="Color#rgb"><a href="Color.html#rgb">rgb</a></li>
            
                <li data-name="Color#rgba"><a href="Color.html#rgba">rgba</a></li>
            
                <li data-name="Color#rgbaString"><a href="Color.html#rgbaString">rgbaString</a></li>
            
                <li data-name="Color#rgbString"><a href="Color.html#rgbString">rgbString</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Color#setColor"><a href="Color.html#setColor">setColor</a></li>
            
                <li data-name="Color#toString"><a href="Color.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ColorPicker">
            <span class="title">
                <a href="ColorPicker.html">ColorPicker</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ColorPicker#object"><a href="ColorPicker.html#object">object</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ColorPicker#_configureView"><a href="ColorPicker.html#_configureView">_configureView</a></li>
            
                <li data-name="ColorPicker#alphaListener"><a href="ColorPicker.html#alphaListener">alphaListener</a></li>
            
                <li data-name="ColorPicker#dialogListener"><a href="ColorPicker.html#dialogListener">dialogListener</a></li>
            
                <li data-name="ColorPicker#doneListener"><a href="ColorPicker.html#doneListener">doneListener</a></li>
            
                <li data-name="ColorPicker#enableDragging"><a href="ColorPicker.html#enableDragging">enableDragging</a></li>
            
                <li data-name="ColorPicker#originalColorListener"><a href="ColorPicker.html#originalColorListener">originalColorListener</a></li>
            
                <li data-name="ColorPicker#pickerListener"><a href="ColorPicker.html#pickerListener">pickerListener</a></li>
            
                <li data-name="ColorPicker#slideListener"><a href="ColorPicker.html#slideListener">slideListener</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Divider">
            <span class="title">
                <a href="Divider.html">Divider</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Divider#adjustedSpacing"><a href="Divider.html#adjustedSpacing">adjustedSpacing</a></li>
            
                <li data-name="Divider#adjustedThickness"><a href="Divider.html#adjustedThickness">adjustedThickness</a></li>
            
                <li data-name="Divider#bbOffsets"><a href="Divider.html#bbOffsets">bbOffsets</a></li>
            
                <li data-name="Divider#color"><a href="Divider.html#color">color</a></li>
            
                <li data-name="Divider#spacing"><a href="Divider.html#spacing">spacing</a></li>
            
                <li data-name="Divider#thickness"><a href="Divider.html#thickness">thickness</a></li>
            
                <li data-name="Divider#visibleRange"><a href="Divider.html#visibleRange">visibleRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Divider#toString"><a href="Divider.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Dividers">
            <span class="title">
                <a href="Dividers.html">Dividers</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Dividers#bbOffsets"><a href="Dividers.html#bbOffsets">bbOffsets</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Dividers#toString"><a href="Dividers.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="EventMonitor">
            <span class="title">
                <a href="EventMonitor.html">EventMonitor</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="EventMonitor#canvas"><a href="EventMonitor.html#canvas">canvas</a></li>
            
                <li data-name="EventMonitor#viewer"><a href="EventMonitor.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Events">
            <span class="title">
                <a href="Events.html">Events</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Events#off"><a href="Events.html#off">off</a></li>
            
                <li data-name="Events#on"><a href="Events.html#on">on</a></li>
            
                <li data-name="Events#trigger"><a href="Events.html#trigger">trigger</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Feature">
            <span class="title">
                <a href="Feature.html">Feature</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Feature#color"><a href="Feature.html#color">color</a></li>
            
                <li data-name="Feature#decoration"><a href="Feature.html#decoration">decoration</a></li>
            
                <li data-name="Feature#extractedFromSequence"><a href="Feature.html#extractedFromSequence">extractedFromSequence</a></li>
            
                <li data-name="Feature#favorite"><a href="Feature.html#favorite">favorite</a></li>
            
                <li data-name="Feature#label"><a href="Feature.html#label">label</a></li>
            
                <li data-name="Feature#legend"><a href="Feature.html#legend">legend</a></li>
            
                <li data-name="Feature#legendItem"><a href="Feature.html#legendItem">legendItem</a></li>
            
                <li data-name="Feature#name"><a href="Feature.html#name">name</a></li>
            
                <li data-name="Feature#range"><a href="Feature.html#range">range</a></li>
            
                <li data-name="Feature#score"><a href="Feature.html#score">score</a></li>
            
                <li data-name="Feature#start"><a href="Feature.html#start">start</a></li>
            
                <li data-name="Feature#stop"><a href="Feature.html#stop">stop</a></li>
            
                <li data-name="Feature#type"><a href="Feature.html#type">type</a></li>
            
                <li data-name="Feature#viewer"><a href="Feature.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Feature#highlight"><a href="Feature.html#highlight">highlight</a></li>
            
                <li data-name="Feature#moveTo"><a href="Feature.html#moveTo">moveTo</a></li>
            
                <li data-name="Feature#remove"><a href="Feature.html#remove">remove</a></li>
            
                <li data-name="Feature#slots"><a href="Feature.html#slots">slots</a></li>
            
                <li data-name="Feature#toString"><a href="Feature.html#toString">toString</a></li>
            
                <li data-name="Feature#tracks"><a href="Feature.html#tracks">tracks</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Font">
            <span class="title">
                <a href="Font.html">Font</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Font#bold"><a href="Font.html#bold">bold</a></li>
            
                <li data-name="Font#css"><a href="Font.html#css">css</a></li>
            
                <li data-name="Font#family"><a href="Font.html#family">family</a></li>
            
                <li data-name="Font#height"><a href="Font.html#height">height</a></li>
            
                <li data-name="Font#italic"><a href="Font.html#italic">italic</a></li>
            
                <li data-name="Font#size"><a href="Font.html#size">size</a></li>
            
                <li data-name="Font#string"><a href="Font.html#string">string</a></li>
            
                <li data-name="Font#style"><a href="Font.html#style">style</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Font.calculateWidths"><a href="Font.html#.calculateWidths">calculateWidths</a></li>
            
                <li data-name="Font#cssScaled"><a href="Font.html#cssScaled">cssScaled</a></li>
            
                <li data-name="Font#toString"><a href="Font.html#toString">toString</a></li>
            
                <li data-name="Font#width"><a href="Font.html#width">width</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Highlighter">
            <span class="title">
                <a href="Highlighter.html">Highlighter</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Highlighter#viewer"><a href="Highlighter.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IO">
            <span class="title">
                <a href="IO.html">IO</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="IO#viewer"><a href="IO.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IO#initializeDragAndDrop"><a href="IO.html#initializeDragAndDrop">initializeDragAndDrop</a></li>
            
                <li data-name="IO#loadJSON"><a href="IO.html#loadJSON">loadJSON</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Layout">
            <span class="title">
                <a href="Layout.html">Layout</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Layout#backbone"><a href="Layout.html#backbone">backbone</a></li>
            
                <li data-name="Layout#bbInsideOffset"><a href="Layout.html#bbInsideOffset">bbInsideOffset</a></li>
            
                <li data-name="Layout#bbOutsideOffset"><a href="Layout.html#bbOutsideOffset">bbOutsideOffset</a></li>
            
                <li data-name="Layout#canvas"><a href="Layout.html#canvas">canvas</a></li>
            
                <li data-name="Layout#centerInsideOffset"><a href="Layout.html#centerInsideOffset">centerInsideOffset</a></li>
            
                <li data-name="Layout#centerOutsideOffset"><a href="Layout.html#centerOutsideOffset">centerOutsideOffset</a></li>
            
                <li data-name="Layout#height"><a href="Layout.html#height">height</a></li>
            
                <li data-name="Layout#maxSlotThickness"><a href="Layout.html#maxSlotThickness">maxSlotThickness</a></li>
            
                <li data-name="Layout#minSlotThickness"><a href="Layout.html#minSlotThickness">minSlotThickness</a></li>
            
                <li data-name="Layout#scale"><a href="Layout.html#scale">scale</a></li>
            
                <li data-name="Layout#sequence"><a href="Layout.html#sequence">sequence</a></li>
            
                <li data-name="Layout#slotProportionStats"><a href="Layout.html#slotProportionStats">slotProportionStats</a></li>
            
                <li data-name="Layout#slotThicknessRatioStats"><a href="Layout.html#slotThicknessRatioStats">slotThicknessRatioStats</a></li>
            
                <li data-name="Layout#type"><a href="Layout.html#type">type</a></li>
            
                <li data-name="Layout#viewer"><a href="Layout.html#viewer">viewer</a></li>
            
                <li data-name="Layout#width"><a href="Layout.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Layout#_adjustProportions"><a href="Layout.html#_adjustProportions">_adjustProportions</a></li>
            
                <li data-name="Layout#_calculateSlotThickness"><a href="Layout.html#_calculateSlotThickness">_calculateSlotThickness</a></li>
            
                <li data-name="Layout#bpForPoint"><a href="Layout.html#bpForPoint">bpForPoint</a></li>
            
                <li data-name="Layout#maxMapThickness"><a href="Layout.html#maxMapThickness">maxMapThickness</a></li>
            
                <li data-name="Layout#pixelsPerBp"><a href="Layout.html#pixelsPerBp">pixelsPerBp</a></li>
            
                <li data-name="Layout#pointFor"><a href="Layout.html#pointFor">pointFor</a></li>
            
                <li data-name="Layout#updateLayout"><a href="Layout.html#updateLayout">updateLayout</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LayoutCircular">
            <span class="title">
                <a href="LayoutCircular.html">LayoutCircular</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LayoutCircular#_maximumVisibleRadius"><a href="LayoutCircular.html#_maximumVisibleRadius">_maximumVisibleRadius</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LayoutLinear">
            <span class="title">
                <a href="LayoutLinear.html">LayoutLinear</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LayoutOLD">
            <span class="title">
                <a href="LayoutOLD.html">LayoutOLD</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LayoutOLD#canvas"><a href="LayoutOLD.html#canvas">canvas</a></li>
            
                <li data-name="LayoutOLD#insideRadius"><a href="LayoutOLD.html#insideRadius">insideRadius</a></li>
            
                <li data-name="LayoutOLD#maxSlotThickness"><a href="LayoutOLD.html#maxSlotThickness">maxSlotThickness</a></li>
            
                <li data-name="LayoutOLD#minSlotThickness"><a href="LayoutOLD.html#minSlotThickness">minSlotThickness</a></li>
            
                <li data-name="LayoutOLD#outsideRadius"><a href="LayoutOLD.html#outsideRadius">outsideRadius</a></li>
            
                <li data-name="LayoutOLD#slotProportionOfRadii"><a href="LayoutOLD.html#slotProportionOfRadii">slotProportionOfRadii</a></li>
            
                <li data-name="LayoutOLD#slotThicknessRatios"><a href="LayoutOLD.html#slotThicknessRatios">slotThicknessRatios</a></li>
            
                <li data-name="LayoutOLD#viewer"><a href="LayoutOLD.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LayoutOLD#_adjustProportions"><a href="LayoutOLD.html#_adjustProportions">_adjustProportions</a></li>
            
                <li data-name="LayoutOLD#_calculateSlotThickness"><a href="LayoutOLD.html#_calculateSlotThickness">_calculateSlotThickness</a></li>
            
                <li data-name="LayoutOLD#updateLayout"><a href="LayoutOLD.html#updateLayout">updateLayout</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Legend">
            <span class="title">
                <a href="Legend.html">Legend</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Legend#backgroundColor"><a href="Legend.html#backgroundColor">backgroundColor</a></li>
            
                <li data-name="Legend#ctx"><a href="Legend.html#ctx">ctx</a></li>
            
                <li data-name="Legend#font"><a href="Legend.html#font">font</a></li>
            
                <li data-name="Legend#fontColor"><a href="Legend.html#fontColor">fontColor</a></li>
            
                <li data-name="Legend#highlightedSwatchedItem"><a href="Legend.html#highlightedSwatchedItem">highlightedSwatchedItem</a></li>
            
                <li data-name="Legend#id"><a href="Legend.html#id">id</a></li>
            
                <li data-name="Legend#items"><a href="Legend.html#items">items</a></li>
            
                <li data-name="Legend#name"><a href="Legend.html#name">name</a></li>
            
                <li data-name="Legend#position"><a href="Legend.html#position">position</a></li>
            
                <li data-name="Legend#selectedSwatchedItem"><a href="Legend.html#selectedSwatchedItem">selectedSwatchedItem</a></li>
            
                <li data-name="Legend#textAlignment"><a href="Legend.html#textAlignment">textAlignment</a></li>
            
                <li data-name="Legend#viewer"><a href="Legend.html#viewer">viewer</a></li>
            
                <li data-name="Legend#visibleItems"><a href="Legend.html#visibleItems">visibleItems</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Legend#refresh"><a href="Legend.html#refresh">refresh</a></li>
            
                <li data-name="Legend#toString"><a href="Legend.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="LegendItem">
            <span class="title">
                <a href="LegendItem.html">LegendItem</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="LegendItem#caption"><a href="LegendItem.html#caption">caption</a></li>
            
                <li data-name="LegendItem#color"><a href="LegendItem.html#color">color</a></li>
            
                <li data-name="LegendItem#decoration"><a href="LegendItem.html#decoration">decoration</a></li>
            
                <li data-name="LegendItem#drawSwatch"><a href="LegendItem.html#drawSwatch">drawSwatch</a></li>
            
                <li data-name="LegendItem#font"><a href="LegendItem.html#font">font</a></li>
            
                <li data-name="LegendItem#fontColor"><a href="LegendItem.html#fontColor">fontColor</a></li>
            
                <li data-name="LegendItem#height"><a href="LegendItem.html#height">height</a></li>
            
                <li data-name="LegendItem#id"><a href="LegendItem.html#id">id</a></li>
            
                <li data-name="LegendItem#legend"><a href="LegendItem.html#legend">legend</a></li>
            
                <li data-name="LegendItem#name"><a href="LegendItem.html#name">name</a></li>
            
                <li data-name="LegendItem#parent"><a href="LegendItem.html#parent">parent</a></li>
            
                <li data-name="LegendItem#swatchColor"><a href="LegendItem.html#swatchColor">swatchColor</a></li>
            
                <li data-name="LegendItem#swatchHighlighted"><a href="LegendItem.html#swatchHighlighted">swatchHighlighted</a></li>
            
                <li data-name="LegendItem#swatchSelected"><a href="LegendItem.html#swatchSelected">swatchSelected</a></li>
            
                <li data-name="LegendItem#textAlignment"><a href="LegendItem.html#textAlignment">textAlignment</a></li>
            
                <li data-name="LegendItem#width"><a href="LegendItem.html#width">width</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="LegendItem#toString"><a href="LegendItem.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Messenger">
            <span class="title">
                <a href="Messenger.html">Messenger</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Messenger#fadeTime"><a href="Messenger.html#fadeTime">fadeTime</a></li>
            
                <li data-name="Messenger#viewer"><a href="Messenger.html#viewer">viewer</a></li>
            
                <li data-name="Messenger#visible"><a href="Messenger.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Messenger#close"><a href="Messenger.html#close">close</a></li>
            
                <li data-name="Messenger#open"><a href="Messenger.html#open">open</a></li>
            
                <li data-name="Messenger#toString"><a href="Messenger.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="NCList">
            <span class="title">
                <a href="NCList.html">NCList</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="NCList#length"><a href="NCList.html#length">length</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="NCList#_normalize"><a href="NCList.html#_normalize">_normalize</a></li>
            
                <li data-name="NCList#end"><a href="NCList.html#end">end</a></li>
            
                <li data-name="NCList#fill"><a href="NCList.html#fill">fill</a></li>
            
                <li data-name="NCList#start"><a href="NCList.html#start">start</a></li>
            
                <li data-name="NCList#sublist"><a href="NCList.html#sublist">sublist</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Plot">
            <span class="title">
                <a href="Plot.html">Plot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Plot#baseline"><a href="Plot.html#baseline">baseline</a></li>
            
                <li data-name="Plot#color"><a href="Plot.html#color">color</a></li>
            
                <li data-name="Plot#legend"><a href="Plot.html#legend">legend</a></li>
            
                <li data-name="Plot#legendItem"><a href="Plot.html#legendItem">legendItem</a></li>
            
                <li data-name="Plot#legendItemNegative"><a href="Plot.html#legendItemNegative">legendItemNegative</a></li>
            
                <li data-name="Plot#legendItemPositive"><a href="Plot.html#legendItemPositive">legendItemPositive</a></li>
            
                <li data-name="Plot#legendNegative"><a href="Plot.html#legendNegative">legendNegative</a></li>
            
                <li data-name="Plot#legendPositive"><a href="Plot.html#legendPositive">legendPositive</a></li>
            
                <li data-name="Plot#length"><a href="Plot.html#length">length</a></li>
            
                <li data-name="Plot#positions"><a href="Plot.html#positions">positions</a></li>
            
                <li data-name="Plot#score"><a href="Plot.html#score">score</a></li>
            
                <li data-name="Plot#viewer"><a href="Plot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Plot#remove"><a href="Plot.html#remove">remove</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Rect">
            <span class="title">
                <a href="Rect.html">Rect</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Rect#bottom"><a href="Rect.html#bottom">bottom</a></li>
            
                <li data-name="Rect#height"><a href="Rect.html#height">height</a></li>
            
                <li data-name="Rect#left"><a href="Rect.html#left">left</a></li>
            
                <li data-name="Rect#right"><a href="Rect.html#right">right</a></li>
            
                <li data-name="Rect#top"><a href="Rect.html#top">top</a></li>
            
                <li data-name="Rect#width"><a href="Rect.html#width">width</a></li>
            
                <li data-name="Rect#x"><a href="Rect.html#x">x</a></li>
            
                <li data-name="Rect#y"><a href="Rect.html#y">y</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Rect#containsPt"><a href="Rect.html#containsPt">containsPt</a></li>
            
                <li data-name="Rect#overlap"><a href="Rect.html#overlap">overlap</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ruler">
            <span class="title">
                <a href="Ruler.html">Ruler</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Ruler#color"><a href="Ruler.html#color">color</a></li>
            
                <li data-name="Ruler#majorTicks"><a href="Ruler.html#majorTicks">majorTicks</a></li>
            
                <li data-name="Ruler#majorTickStep"><a href="Ruler.html#majorTickStep">majorTickStep</a></li>
            
                <li data-name="Ruler#minorTicks"><a href="Ruler.html#minorTicks">minorTicks</a></li>
            
                <li data-name="Ruler#minorTickStep"><a href="Ruler.html#minorTickStep">minorTickStep</a></li>
            
                <li data-name="Ruler#tickFormater"><a href="Ruler.html#tickFormater">tickFormater</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Ruler#_createTickFormatter"><a href="Ruler.html#_createTickFormatter">_createTickFormatter</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Sequence">
            <span class="title">
                <a href="Sequence.html">Sequence</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Sequence#bpMargin"><a href="Sequence.html#bpMargin">bpMargin</a></li>
            
                <li data-name="Sequence#bpSpacing"><a href="Sequence.html#bpSpacing">bpSpacing</a></li>
            
                <li data-name="Sequence#color"><a href="Sequence.html#color">color</a></li>
            
                <li data-name="Sequence#font"><a href="Sequence.html#font">font</a></li>
            
                <li data-name="Sequence#length"><a href="Sequence.html#length">length</a></li>
            
                <li data-name="Sequence#seq"><a href="Sequence.html#seq">seq</a></li>
            
                <li data-name="Sequence#sequenceExtractor"><a href="Sequence.html#sequenceExtractor">sequenceExtractor</a></li>
            
                <li data-name="Sequence#thickness"><a href="Sequence.html#thickness">thickness</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Sequence.random"><a href="Sequence.html#.random">random</a></li>
            
                <li data-name="Sequence#addBp"><a href="Sequence.html#addBp">addBp</a></li>
            
                <li data-name="Sequence#constrain"><a href="Sequence.html#constrain">constrain</a></li>
            
                <li data-name="Sequence#findPattern"><a href="Sequence.html#findPattern">findPattern</a></li>
            
                <li data-name="Sequence#forRange"><a href="Sequence.html#forRange">forRange</a></li>
            
                <li data-name="Sequence#subtractBp"><a href="Sequence.html#subtractBp">subtractBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SequenceExtractor">
            <span class="title">
                <a href="SequenceExtractor.html">SequenceExtractor</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="SequenceExtractor#length"><a href="SequenceExtractor.html#length">length</a></li>
            
                <li data-name="SequenceExtractor#seqString"><a href="SequenceExtractor.html#seqString">seqString</a></li>
            
                <li data-name="SequenceExtractor#sequence"><a href="SequenceExtractor.html#sequence">sequence</a></li>
            
                <li data-name="SequenceExtractor#viewer"><a href="SequenceExtractor.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Settings">
            <span class="title">
                <a href="Settings.html">Settings</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Settings#arrowHeadLength"><a href="Settings.html#arrowHeadLength">arrowHeadLength</a></li>
            
                <li data-name="Settings#backgroundColor"><a href="Settings.html#backgroundColor">backgroundColor</a></li>
            
                <li data-name="Settings#showShading"><a href="Settings.html#showShading">showShading</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Slot">
            <span class="title">
                <a href="Slot.html">Slot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Slot#bbOffset"><a href="Slot.html#bbOffset">bbOffset</a></li>
            
                <li data-name="Slot#canvas"><a href="Slot.html#canvas">canvas</a></li>
            
                <li data-name="Slot#centerOffset"><a href="Slot.html#centerOffset">centerOffset</a></li>
            
                <li data-name="Slot#inside"><a href="Slot.html#inside">inside</a></li>
            
                <li data-name="Slot#layout"><a href="Slot.html#layout">layout</a></li>
            
                <li data-name="Slot#meta"><a href="Slot.html#meta">meta</a></li>
            
                <li data-name="Slot#outside"><a href="Slot.html#outside">outside</a></li>
            
                <li data-name="Slot#position"><a href="Slot.html#position">position</a></li>
            
                <li data-name="Slot#proportionOfMap"><a href="Slot.html#proportionOfMap">proportionOfMap</a></li>
            
                <li data-name="Slot#sequence"><a href="Slot.html#sequence">sequence</a></li>
            
                <li data-name="Slot#thickness"><a href="Slot.html#thickness">thickness</a></li>
            
                <li data-name="Slot#thicknessRatio"><a href="Slot.html#thicknessRatio">thicknessRatio</a></li>
            
                <li data-name="Slot#track"><a href="Slot.html#track">track</a></li>
            
                <li data-name="Slot#type"><a href="Slot.html#type">type</a></li>
            
                <li data-name="Slot#viewer"><a href="Slot.html#viewer">viewer</a></li>
            
                <li data-name="Slot#visible"><a href="Slot.html#visible">visible</a></li>
            
                <li data-name="Slot#visibleRange"><a href="Slot.html#visibleRange">visibleRange</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Slot#containsCenterOffset"><a href="Slot.html#containsCenterOffset">containsCenterOffset</a></li>
            
                <li data-name="Slot#findFeaturesForBp"><a href="Slot.html#findFeaturesForBp">findFeaturesForBp</a></li>
            
                <li data-name="Slot#pixelsPerBp"><a href="Slot.html#pixelsPerBp">pixelsPerBp</a></li>
            
                <li data-name="Slot#removeFeatures"><a href="Slot.html#removeFeatures">removeFeatures</a></li>
            
                <li data-name="Slot#removePlot"><a href="Slot.html#removePlot">removePlot</a></li>
            
                <li data-name="Slot#toString"><a href="Slot.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Track">
            <span class="title">
                <a href="Track.html">Track</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Track#canvas"><a href="Track.html#canvas">canvas</a></li>
            
                <li data-name="Track#contents"><a href="Track.html#contents">contents</a></li>
            
                <li data-name="Track#count"><a href="Track.html#count">count</a></li>
            
                <li data-name="Track#id"><a href="Track.html#id">id</a></li>
            
                <li data-name="Track#layout"><a href="Track.html#layout">layout</a></li>
            
                <li data-name="Track#loadProgress"><a href="Track.html#loadProgress">loadProgress</a></li>
            
                <li data-name="Track#meta"><a href="Track.html#meta">meta</a></li>
            
                <li data-name="Track#name"><a href="Track.html#name">name</a></li>
            
                <li data-name="Track#plot"><a href="Track.html#plot">plot</a></li>
            
                <li data-name="Track#position"><a href="Track.html#position">position</a></li>
            
                <li data-name="Track#readingFrame"><a href="Track.html#readingFrame">readingFrame</a></li>
            
                <li data-name="Track#sequence"><a href="Track.html#sequence">sequence</a></li>
            
                <li data-name="Track#strand"><a href="Track.html#strand">strand</a></li>
            
                <li data-name="Track#thicknessRatio"><a href="Track.html#thicknessRatio">thicknessRatio</a></li>
            
                <li data-name="Track#type"><a href="Track.html#type">type</a></li>
            
                <li data-name="Track#viewer"><a href="Track.html#viewer">viewer</a></li>
            
                <li data-name="Track#visible"><a href="Track.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Track#features"><a href="Track.html#features">features</a></li>
            
                <li data-name="Track#removeFeatures"><a href="Track.html#removeFeatures">removeFeatures</a></li>
            
                <li data-name="Track#removePlot"><a href="Track.html#removePlot">removePlot</a></li>
            
                <li data-name="Track#toString"><a href="Track.html#toString">toString</a></li>
            
                <li data-name="Track#uniqueFeatures"><a href="Track.html#uniqueFeatures">uniqueFeatures</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="TrackContents">
            <span class="title">
                <a href="TrackContents.html">TrackContents</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="TrackContents#canvas"><a href="TrackContents.html#canvas">canvas</a></li>
            
                <li data-name="TrackContents#extract"><a href="TrackContents.html#extract">extract</a></li>
            
                <li data-name="TrackContents#from"><a href="TrackContents.html#from">from</a></li>
            
                <li data-name="TrackContents#layout"><a href="TrackContents.html#layout">layout</a></li>
            
                <li data-name="TrackContents#meta"><a href="TrackContents.html#meta">meta</a></li>
            
                <li data-name="TrackContents#options"><a href="TrackContents.html#options">options</a></li>
            
                <li data-name="TrackContents#sequence"><a href="TrackContents.html#sequence">sequence</a></li>
            
                <li data-name="TrackContents#track"><a href="TrackContents.html#track">track</a></li>
            
                <li data-name="TrackContents#type"><a href="TrackContents.html#type">type</a></li>
            
                <li data-name="TrackContents#viewer"><a href="TrackContents.html#viewer">viewer</a></li>
            
                <li data-name="TrackContents#visible"><a href="TrackContents.html#visible">visible</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="TrackContents#toString"><a href="TrackContents.html#toString">toString</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Viewer#allowDragAndDrop"><a href="Viewer.html#allowDragAndDrop">allowDragAndDrop</a></li>
            
                <li data-name="Viewer#format"><a href="Viewer.html#format">format</a></li>
            
                <li data-name="Viewer#height"><a href="Viewer.html#height">height</a></li>
            
                <li data-name="Viewer#id"><a href="Viewer.html#id">id</a></li>
            
                <li data-name="Viewer#layout"><a href="Viewer.html#layout">layout</a></li>
            
                <li data-name="Viewer#maxZoomFactor"><a href="Viewer.html#maxZoomFactor">maxZoomFactor</a></li>
            
                <li data-name="Viewer#minDimension"><a href="Viewer.html#minDimension">minDimension</a></li>
            
                <li data-name="Viewer#minZoomFactor"><a href="Viewer.html#minZoomFactor">minZoomFactor</a></li>
            
                <li data-name="Viewer#name"><a href="Viewer.html#name">name</a></li>
            
                <li data-name="Viewer#scale"><a href="Viewer.html#scale">scale</a></li>
            
                <li data-name="Viewer#sequence"><a href="Viewer.html#sequence">sequence</a></li>
            
                <li data-name="Viewer#width"><a href="Viewer.html#width">width</a></li>
            
                <li data-name="Viewer#zoomFactor"><a href="Viewer.html#zoomFactor">zoomFactor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#captions"><a href="Viewer.html#captions">captions</a></li>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#features"><a href="Viewer.html#features">features</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
                <li data-name="Viewer#moveTo"><a href="Viewer.html#moveTo">moveTo</a></li>
            
                <li data-name="Viewer#objects"><a href="Viewer.html#objects">objects</a></li>
            
                <li data-name="Viewer#plots"><a href="Viewer.html#plots">plots</a></li>
            
                <li data-name="Viewer#resize"><a href="Viewer.html#resize">resize</a></li>
            
                <li data-name="Viewer#slots"><a href="Viewer.html#slots">slots</a></li>
            
                <li data-name="Viewer#sources"><a href="Viewer.html#sources">sources</a></li>
            
                <li data-name="Viewer#tracks"><a href="Viewer.html#tracks">tracks</a></li>
            
                <li data-name="Viewer#zoomTo"><a href="Viewer.html#zoomTo">zoomTo</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Layout.js.html">Source: Layout.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>// FIXME: Use delegate for layout format
//   - move scales to layout
//   - move zoomFactor to layout
//////////////////////////////////////////////////////////////////////////////
// Layout for Circular Maps
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {
  /**
   * &lt;br />
   * The Layout is in control of creating slots from tracks and drawing the map.
   */
  class Layout {

    /**
     * Create a Layout
     */
    constructor(viewer) {
      this._viewer = viewer;

      // this._tracks = new CGV.CGArray();
      this._fastMaxFeatures = 1000;
      // TODO: move to settings
      // this._minSlotThickness = CGV.defaultFor(data.minSlotThickness, 1);
      // this._maxSlotThickness = CGV.defaultFor(data.maxSlotThickness, 50);
      this._minSlotThickness = 1;
      this._maxSlotThickness = 50;

      // this.updateScales();

      // Setup scales
      // this._scale = {};
      // this.updateCartesianScales();

      // // Create tracks
      // if (data.tracks) {
      //   data.tracks.forEach((trackData) => {
      //     new CGV.Track(this, trackData);
      //   });
      // }
      this._adjustProportions();
    }

    toString() {
      return 'Layout';
    }

    // FIXME: make all these convience properties like in the delegates
    //  - this will clear up the documentation and reduce the lines of unexciting code
    /**
     * @member {Viewer} - Get the *Viewer*
     */
    get viewer() {
      return this._viewer;
    }


    /** * @member {Canvas} - Get the *Canvas*
     */
    get canvas() {
      return this.viewer.canvas;
    }

    /** * @member {Number} - Get the canvas width
     */
    get width() {
      return this.canvas.width;
    }

    /** * @member {Number} - Get the canvas height
     */
    get height() {
      return this.canvas.height;
    }

    /** * @member {Sequence} - Get the *Sequence*
     */
    get sequence() {
      return this.viewer.sequence;
    }

    /** * @member {Backbone} - Get the *Backbone*
     */
    get backbone() {
      return this.viewer.backbone;
    }

    /** * @member {Object} - Return the scales...
     */
    get scale() {
      return this.canvas.scale;
      // return this._scale;
    }

    get delegate() {
      return this._delegate;
    }

    /**
     * @member {Canvas} - Get or set the layout type: linear or circular.
     */
    get type() {
      return this.delegate &amp;&amp; this.delegate.type;
    }

    set type(value) {
      // Determine map center bp before changing layout
      const centerBp = this.delegate &amp;&amp; this.canvas.bpForCanvasCenter();
      const layoutChanged = Boolean(this.delegate &amp;&amp; this.type !== value);
      if (value === 'linear') {
        this._delegate = new CGV.LayoutLinear(this);
      } else if (value === 'circular') {
        this._delegate = new CGV.LayoutCircular(this);
      } else {
        throw 'Layout type must be one of the following: linear, circular';
      }
      this._adjustProportions();
      this.updateScales(layoutChanged, centerBp);
    }

    /** * @member {Number} - Get the distance from the backbone to the inner/bottom edge of the map.
     */
    get bbInsideOffset() {
      return this._bbInsideOffset;
    }

    /** * @member {Number} - Get the distance from the backbone to the outer/top edge of the map.
     */
    get bbOutsideOffset() {
      return this._bbOutsideOffset;
    }

    /** * @member {Number} - Get the distance from the center of the map to the inner/bottom edge of the map.
     */
    get centerInsideOffset() {
      return this._bbInsideOffset + this.backbone.adjustedCenterOffset;
    }

    /** * @member {Number} - Get the distance from the center of the map to the outer/top edge of the map.
     */
    get centerOutsideOffset() {
      return this._bbOutsideOffset + this.backbone.adjustedCenterOffset;
    }

    /** * @member {Number} - Get an object with stats about slot thickness ratios.
     */
    get slotThicknessRatioStats() {
      return this._slotThicknessRatioStats;
    }

    /** * @member {Number} - Get an object with stats about slot proportion of map thickness.
     */
    get slotProportionStats() {
      return this._slotProportionStats;
    }
    //////////////////////////////////////////////////////////////////////////
    // FIXME: Add Documentation
    // Required Delegate Methods
    //////////////////////////////////////////////////////////////////////////

    /**
     * @typedef {Object} Point
     * @property {number} x The X Coordinate
     * @property {number} y The Y Coordinate
     */

    /**
     * Returns the point on the canvas for the given *bp* and *centerOffset*.
     * @param {Number} bp - Basepair
     * @param {Number} centerOffset - Distance from the center of the map. For a circulare map, this is the radius, while for a linear map, it's the distance from the backbone.
     *
     * @returns {Point} - The point on the canvas.
     */
    pointFor(...args) {
      return this.delegate.pointFor(...args);
    }

    /**
     * Returns the basepair corresponding to the given *point* on the canvas.
     * @param {Point} point - Point on the canvas.
     *
     * @returns {Number} - The basepair.
     */
    bpForPoint(...args) {
      return this.delegate.bpForPoint(...args);
    }

    // centerOffsetForPoint(point) {
    centerOffsetForPoint(...args) {
      return this.delegate.centerOffsetForPoint(...args);
    }

    domainsFor(...args) {
      return this.delegate.domainsFor(...args);
    }

    adjustBpScaleRange(...args) {
      return this.delegate.adjustBpScaleRange(...args);
    }

    // FIXME: update arguments
    // path(layer, radius, startBp, stopBp, anticlockwise = false, startType = 'moveTo') {
    path(...args) {
      this.delegate.path(...args);
    }

    // visibleRangeForCenterOffset(offset, margin = 0) {
    visibleRangeForCenterOffset(...args) {
      return this.delegate.visibleRangeForCenterOffset(...args);
    }

    /**
     * Return the maximum radius to use for calculating slot thickness when zoomed
     * @return {Number}
     */
    maxMapThickness() {
      return this.delegate.maxMapThickness();
    }

    /**
     * The number of pixels per basepair along the backbone.
     * @return {Number}
     */
    // pixelsPerBp(mapCenterOffset = this.backbone.adjustedCenterOffset) {
    pixelsPerBp(...args) {
      return this.delegate.pixelsPerBp(...args);
    }

    // Returns the clock position (1-12) for the supplied bp.
    // For example, the top of the map would be 12, the bottom would be 6 and 
    // the right side of a circular map will be 3. 
    // clockPositionForBp(bp, inverse=false) {
    clockPositionForBp(...args) {
      return this.delegate.clockPositionForBp(...args);
    }

    // Return the initial maximum space/thickness to draw the map around the backbone
    // initialWorkingSpace() {
    initialWorkingSpace() {
      return this.delegate.initialWorkingSpace();
    }

    // Set the backbone centerOffset based on the approximate inside and outside
    // thickness of the map.
    // updateInitialBackboneCenterOffset(insideThickness, outsideThickness) {
    updateInitialBackboneCenterOffset(...args) {
      this.delegate.updateInitialBackboneCenterOffset(...args);
    }


    //////////////////////////////////////////////////////////////////////////
    // Common methods for current layouts: linear, circular
    //  - This method may have to be altered if additional layouts are added
    //////////////////////////////////////////////////////////////////////////

    // NOTES:
    //  - 3 scenarios
    //    - scales have not been initialized so simple center the map
    //    - scales already initialized and layout has not changed
    //      - keep the map centered as the scales change
    //    - layout changed
    //      - based on zoom will the whole map be in the canvas (determine from radius for the zoom)
    //        - if so: center the map
    //        - if not: center the map on the backbone at the bp that was the linear center
    updateScales(layoutChanged, bp) {
      if (!this.sequence) { return; }
      bp = bp &amp;&amp; this.sequence.constrain(bp);
      const canvas = this.canvas;
      const scale = this.scale;

      // BP Scale
      scale.bp = d3.scaleLinear()
        .domain([1, this.sequence.length]);
      // The argument 'true' only affects the circular version of this method
      this.adjustBpScaleRange(true);
      this.viewer._updateZoomMax();

      // X/Y Scales
      if (layoutChanged) {
        // Deleting the current scales will cause the map to be centered
        scale.x = undefined;
        scale.y = undefined;
        this._updateScaleForAxis('x', canvas.width);
        this._updateScaleForAxis('y', canvas.height);
        // At larger zoom levels and when a bp was given, center the map on that bp
        const zoomFactorCutoff = 1.25;
        if (this.viewer.zoomFactor > zoomFactorCutoff &amp;&amp; bp) {
          // Get point for bp and backbone centerOffset (NOTE: bp scale must be set first)
          const point = this.pointFor(bp);
          const dx = scale.x.invert(point.x);
          const dy = scale.y.invert(point.y);
          this.translate(-dx, dy);
        }
      } else {
        // The canvas is being resized or initialized
        this._updateScaleForAxis('x', canvas.width);
        this._updateScaleForAxis('y', canvas.height);
      }
    }

    // The center of the zoom will be the supplied bp position on the backbone.
    // The default bp will be based on the center of the canvas.
    zoom(zoomFactor, bp = this.canvas.bpForCanvasCenter()) {
      // Center of zoom before zooming
      const {x: centerX1, y: centerY1} = this.pointFor(bp);

      zoomFactor = CGV.constrain(zoomFactor, this.viewer.minZoomFactor, this.viewer.maxZoomFactor);

      // Update the d3.zoom transform.
      // Only need to do this if setting Viewer.zoomFactor. The zoom transform is set
      // automatically when zooming via d3 (ie. in Viewer-Zoom.js)
      d3.zoomTransform(this.canvas.node('ui')).k = zoomFactor;

      // Update zoom factor
      this.viewer._zoomFactor = zoomFactor;

      // Update the BP scale, currently this is only needed for the linear layout
      this.adjustBpScaleRange();

      // Center of zoom after zooming
      // pointFor is on the backbone by default
      const {x: centerX2, y: centerY2} = this.pointFor(bp);

      // Find differerence in x/y and translate the domains
      const dx = centerX1 - centerX2;
      const dy = centerY2 - centerY1;
      this.translate(dx, -dy);
    }

    translate(dx, dy) {
      const domainX = this.scale.x.domain();
      const domainY = this.scale.y.domain();
      this.scale.x.domain([domainX[0] - dx, domainX[1] - dx]);
      this.scale.y.domain([domainY[0] + dy, domainY[1] + dy]);
    }


    //////////////////////////////////////////////////////////////////////////
    // Methods for determining offsets and Drawing
    // FIXME: Organized better
    //////////////////////////////////////////////////////////////////////////

    _updateSlotThicknessRatioStats(slots = this.visibleSlots()) {
      const thicknessRatios = slots.map( s => s.thicknessRatio );
      this._slotThicknessRatioStats = {
        min: d3.min(thicknessRatios),
        max: d3.max(thicknessRatios),
        sum: d3.sum(thicknessRatios)
      };
    }

    _updateSlotProportionStats(slots = this.visibleSlots()) {
      const proportions = slots.map( s => s.proportionOfMap );
      this._slotProportionStats = {
        min: d3.min(proportions),
        max: d3.max(proportions),
        sum: d3.sum(proportions)
      };
    }

    // Returns the space (in pixels) of everything but the slots
    // i.e. dividers, spacing, and backbone
    // Note: the backbone is only included if position is 'both'
    // _nonSlotSpace(slots = this.visibleSlots(), position = 'both') {
    //   const viewer = this.viewer;
    //   const backbone = viewer.backbone;
    //   const slotDivider = viewer.slotDivider;
    //   // const dividerThickness = slotDivider.visible ? slotDivider.thickness : 0;
    //   const dividerThickness = slotDivider.adjustedThickness;
    //   if (position === 'inside') {
    //     slots = slots.filter( slot => slot.inside );
    //   } else if (position === 'outside') {
    //     slots = slots.filter( slot => slot.outside );
    //   }
    //   const nDividers = (dividerThickness === 0) ? 0 : slots.length;
    //   const nSpaces = slots.length + nDividers;
    //   let space = 0;
    //   if (position === 'both') {
    //     // space += backbone.visible ? backbone.thickness : 0;
    //     space += backbone.adjustedThickness;
    //   }
    //   space += (nDividers * dividerThickness) + (nSpaces * slotDivider.adjustedSpacing);
    //   // console.log({
    //   //   nDividers: nDividers,
    //   //   nSpaces: nSpaces,
    //   //   bt: backbone.thickness,
    //   //   dt: dividerThickness,
    //   //   sds: slotDivider.spacing
    //   // })
    //   return space;
    // }

    // position: 'inside', 'outside'
    _trackNonSlotSpace(track, position = 'inside') {
      const dividers = this.viewer.dividers;

      // let slots = track.slots().filter( s =>  s.visible );
      // if (position === 'inside') {
      //   slots = slots.filter( slot => slot.inside );
      // } else if (position === 'outside') {
      //   slots = slots.filter( slot => slot.outside );
      // }
      let slots = track.slots().filter( s =>  s.visible &amp;&amp; s[position] );

      let space = 0;
      if (slots.length > 0) {
      // for (let j = 0, slotsLength = slots.length; j &lt; slotsLength; j++) {
        // Add track start and end divider spacing
        space += dividers.track.adjustedSpacing * 2;
        // Add track divider thickness
        space += dividers.track.adjustedThickness;
        // Add slot divider spacing and thickness
        const slotDividerCount = slots.length - 1;
        space += slotDividerCount * ((dividers.slot.adjustedSpacing * 2) + dividers.slot.adjustedThickness);
      }
      return space;
    }

    // Returns the space (in pixels) of everything but the slots
    // i.e. dividers, spacing, and backbone
    // position: 'inside', 'outside', 'both'
    // Note: the backbone is only included if position is 'both'
    _nonSlotSpace(position = 'both') {
      const viewer = this.viewer;

      let space = 0;
      const visibleTracks = this.tracks().filter( t =>  t.visible );
      for (let i = 0, len = visibleTracks.length; i &lt; len; i++) {
        // const track = visibleTracks[i].dividerSpace(position);
        const track = visibleTracks[i];
        if (position === 'both') {
          space += this._trackNonSlotSpace(track, 'inside');
          space += this._trackNonSlotSpace(track, 'outside');
        } else {
          space += this._trackNonSlotSpace(track, position);
        }
      }
      if (position === 'both') {
        space += this.backbone.adjustedThickness;
      }

      return space;
    }

    _findSpace(visibleSlots, spaceType = 'min') {
      visibleSlots = visibleSlots || this.visibleSlots();
      const findMinSpace = (spaceType === 'min');
      const minSlotThickness = this.minSlotThickness;
      const maxSlotThickness = this.maxSlotThickness;
      const minThicknessRatio = this.slotThicknessRatioStats.min;
      const maxThicknessRatio = this.slotThicknessRatioStats.max;
      let space = this._nonSlotSpace(visibleSlots);
      // If the min and max slot thickness range is too small for the min/max thickness ratio,
      // we have to scale the ratios
      const scaleRatios = (minSlotThickness / minThicknessRatio * maxThicknessRatio > maxSlotThickness);
      for (let i = 0, len = visibleSlots.length; i &lt; len; i++) {
        const slot = visibleSlots[i];
        // Add Slot thickness based on thicknessRatio and min/max slot thickness
        if (scaleRatios) {
          space += CGV.scaleValue(slot.thicknessRatio,
            {min: minThicknessRatio, max: maxThicknessRatio},
            {min: minSlotThickness, max: maxSlotThickness});
        } else {
          if (findMinSpace) {
            space += slot.thicknessRatio * minSlotThickness / minThicknessRatio;
          } else {
            space += slot.thicknessRatio * maxSlotThickness / maxThicknessRatio;
          }
        }
      }
      return space;
    }

    _minSpace(visibleSlots) {
      return this._findSpace(visibleSlots, 'min');
    }

    _maxSpace(visibleSlots) {
      return this._findSpace(visibleSlots, 'max');
    }

    /**
     * Calculate the backbone centerOffset and slot proportions based on the Viewer size and
     * the number of slots.
     */
    _adjustProportions() {
      const viewer = this.viewer;
      if (!viewer._initialized) { return; }
      const backbone = viewer.backbone;
      const visibleSlots = this.visibleSlots();
      this._updateSlotThicknessRatioStats(visibleSlots);
      // The initial maximum amount of space for drawing slots, backbone, dividers, etc
      const workingSpace = this.initialWorkingSpace();
      // Minimum Space required (based on minSlotThickness)
      const minSpace = this._minSpace(visibleSlots);
      // Maximum Space possible (based on maxSlotThickness)
      // let maxSpace = this._maxSpace(visibleSlots);
      // May need to scale slots, backbone, dividers and spacing to fit everything
      const thicknessScaleFactor = Math.min(workingSpace / minSpace, 1);
      // Calculate nonSlotSpace
      const nonSlotSpace = this._nonSlotSpace(visibleSlots) * thicknessScaleFactor;
      const slotSpace = (workingSpace * thicknessScaleFactor) - nonSlotSpace;

      // The sum of the thickness ratios
      const thicknessRatioSum = this.slotThicknessRatioStats.sum;

      let outsideThickness = this._nonSlotSpace(visibleSlots, 'outside');
      let insideThickness = this._nonSlotSpace(visibleSlots, 'inside');

      // Update slot thick proportions
      this.visibleSlots().each( (i, slot) => {
        slot.proportionOfMap = slot.thicknessRatio / thicknessRatioSum;
        const slotThickness = slotSpace * slot.proportionOfMap;
        if (slot.inside) {
          insideThickness += slotThickness;
        } else {
          outsideThickness += slotThickness;
        }
      });
      this._updateSlotProportionStats(visibleSlots);

      this.updateInitialBackboneCenterOffset(insideThickness, outsideThickness);

      this.updateLayout(true);
    }
    // NOTE:
    // - Also calculate the maxSpace
    //   - then convert to proportion of radius [maxSpaceProportion]
    //   - then use the min(maxSpaceProportion and calculated proportion [slot.thicknessRation / sum slot.thicknessRatio ]
    //   - then assign proportionOfRadius to each slot
    //     - calculated proportion / the min (from above)
    //     - could use scaler here
    // - or drawing slots, dividers, etc should use layout.scaleFactor when drawing
    // console.log({
    //   workingSpace: workingSpace,
    //   minSpace: minSpace,
    //   thicknessScaleFactor: thicknessScaleFactor,
    //   nonSlotSpace: nonSlotSpace,
    //   slotSpace: slotSpace,
    //   // thicknessRatios: thicknessRatios,
    //   thicknessRatioSum: thicknessRatioSum
    // });

    tracks(term) {
      return this.viewer.tracks(term);
    }

    slots(term) {
      return this.viewer.slots(term);
    }

    visibleSlots(term) {
      return this.slots().filter( s => s.visible &amp;&amp; s.track.visible ).get(term);
    }

    slotForCenterOffset(offset) {
      const slots = this.visibleSlots();
      let slot;
      for (let i = 0, len = slots.length; i &lt; len; i++) {
        if (slots[i].containsCenterOffset(offset)) {
          slot = slots[i];
          break;
        }
      }
      return slot;
    }

    get slotLength() {
      return this._slotLength || 0;
    }

    get fastMaxFeatures() {
      return this._fastMaxFeatures;
    }

    get fastFeaturesPerSlot() {
      return this._fastFeaturesPerSlot;
    }

    /**
     * Get or set the max slot thickness.
     */
    get maxSlotThickness() {
      return this._maxSlotThickness;
    }

    set maxSlotThickness(value) {
      this._maxSlotThickness = Number(value);
      this._adjustProportions();
    }

    /**
     * Get or set the min slot thickness.
     */
    get minSlotThickness() {
      return this._minSlotThickness;
    }

    set minSlotThickness(value) {
      this._minSlotThickness = Number(value);
      this._adjustProportions();
    }

    // Draw everyting but the slots and thier features.
    // e.g. draws backbone, dividers, ruler, labels, progress
    drawMapWithoutSlots() {
      const viewer = this.viewer;
      const backbone = viewer.backbone;
      const canvas = this.canvas;
      // let startTime = new Date().getTime();

      viewer.clear('map');
      viewer.clear('ui');

      if (viewer.messenger.visible) {
        viewer.messenger.close();
      }

      // All Text should have base line top
      // FIXME: contexts
      // ctx.textBaseline = 'top';

      // Draw Backbone
      backbone.draw();

      // Recalculate the slot offsets and thickness if the zoom level has changed
      this.updateLayout();

      // Divider rings
      viewer.dividers.draw();
      // Ruler
      const rulerOffsetAdjustment = viewer.dividers.track.adjustedThickness;
      viewer.ruler.draw(this.centerInsideOffset - rulerOffsetAdjustment, this.centerOutsideOffset + rulerOffsetAdjustment);
      // Labels
      if (viewer.annotation.visible) {
        viewer.annotation.draw(this.centerInsideOffset, this.centerOutsideOffset);
      }
      // Progess
      this.drawProgress();

      if (canvas._testDrawRange) {
        const ctx = canvas.context('captions');
        ctx.strokeStyle = 'grey';
        ctx.rect(0, 0, canvas.width, canvas.height);
        ctx.stroke();
      }

      // Slots timout
      this._slotIndex = 0;
      if (this._slotTimeoutID) {
        clearTimeout(this._slotTimeoutID);
        this._slotTimeoutID = undefined;
      }
    }

    drawFast() {
      const startTime = new Date().getTime();
      this.drawMapWithoutSlots();
      this.drawAllSlots(true);
      // Debug
      if (this.viewer.debug) {
        this.viewer.debug.data.time.fastDraw = CGV.elapsedTime(startTime);
        this.viewer.debug.draw(this.canvas.context('ui'));
      }
    }

    drawFull() {
      this.drawMapWithoutSlots();
      this.drawAllSlots(true);
      this._drawFullStartTime = new Date().getTime();
      this.drawSlotWithTimeOut(this);
    }

    drawExport() {
      this.drawMapWithoutSlots();
      this.drawAllSlots(false);
    }

    draw(fast) {
      fast ? this.drawFast() : this.drawFull();
    }

    drawAllSlots(fast) {
      let track, slot;
      // for (let i = 0, trackLen = this._tracks.length; i &lt; trackLen; i++) {
      //   track = this._tracks[i];
      const tracks = this.tracks();
      for (let i = 0, trackLen = tracks.length; i &lt; trackLen; i++) {
        track = tracks[i];
        if (!track.visible) { continue; }
        for (let j = 0, slotLen = track._slots.length; j &lt; slotLen; j++) {
          slot = track._slots[j];
          if (!slot.visible) { continue; }
          slot.draw(this.canvas, fast);
        }
      }
    }

    drawSlotWithTimeOut(layout) {
      const slots = layout.visibleSlots();
      const slot = slots[layout._slotIndex];
      if (!slot) { return; }
      slot.clear();
      slot.draw(layout.canvas);
      layout._slotIndex++;
      if (layout._slotIndex &lt; slots.length) {
        layout._slotTimeoutID = setTimeout(layout.drawSlotWithTimeOut, 0, layout);
      } else {
        if (layout.viewer.debug) {
          layout.viewer.clear('ui');
          layout.viewer.debug.data.time.fullDraw = CGV.elapsedTime(layout._drawFullStartTime);
          layout.viewer.debug.draw(layout.canvas.context('ui'));
        }
        // if (typeof complete === 'function') { complete.call() }
      }
    }

    // #&lt;{(|*
    //  * Updates the radius and thickness of every slot, divider and ruler, only if the zoom level has changed
    //  |)}>#
    // updateLayout(force) {
    //   const viewer = this.viewer;
    //   if (!force &amp;&amp; this._savedZoomFactor === viewer._zoomFactor) {
    //     return;
    //   } else {
    //     this._savedZoomFactor = viewer._zoomFactor;
    //   }
    //   const backbone = viewer.backbone;
    //   // const slotDivider = viewer.slotDivider;
    //   const dividers = viewer.dividers;
    //   const backboneThickness = backbone.adjustedThickness;
    //   let slotRadius = backbone.adjustedCenterOffset;
    //   let directRadius = slotRadius + (backboneThickness / 2);
    //   let reverseRadius = slotRadius - (backboneThickness / 2);
    //   const spacing = slotDivider.spacing;
    //   let residualSlotThickness = 0;
    //   let slot;
    //   // slotDivider.clearBbOffsets();
    //   dividers.clearBbOffsets();
    //   const visibleSlots = this.visibleSlots();
    //   this._slotLength = visibleSlots.length;
    //   for (let i = 0, len = visibleSlots.length; i &lt; len; i++) {
    //     slot = visibleSlots[i];
    //     // Slots and Dividers
    //     // Calculate Slot dimensions
    //     // The slotRadius is the radius at the center of the slot
    //     const slotThickness = this._calculateSlotThickness(slot.proportionOfMap);
    //     slot._thickness = slotThickness;
    //     if (slot.outside) {
    //       directRadius += ( (slotThickness / 2) + spacing + residualSlotThickness);
    //       slotRadius = directRadius;
    //     } else {
    //       reverseRadius -= ( (slotThickness / 2) + spacing + residualSlotThickness);
    //       slotRadius = reverseRadius;
    //     }
    //
    //     slot._radius = slotRadius;
    //
    //     residualSlotThickness = slotThickness / 2;
    //
    //     // Calculate Divider dimensions
    //     const dividerThickness = slotDivider.visible ? slotDivider.thickness : 0;
    //     const spacingAndDividerThickness = (dividerThickness === 0) ? 0 : (dividerThickness + spacing);
    //     if (slot.outside) {
    //       directRadius += residualSlotThickness + spacingAndDividerThickness;
    //       slotRadius = directRadius;
    //     } else {
    //       reverseRadius -= residualSlotThickness + spacingAndDividerThickness;
    //       slotRadius = reverseRadius;
    //     }
    //     // slotDivider.addBbOffset(slotRadius);
    //     dividers.addBbOffset(slotRadius);
    //     residualSlotThickness = dividerThickness / 2;
    //   }
    //   this._fastFeaturesPerSlot = this._fastMaxFeatures / this.slotLength;
    //   this._bbInsideOffset = reverseRadius;
    //   this._bbOutsideOffset = directRadius;
    // }

    // position must be: 'inside' or 'outside'
    _updateLayoutFor(position = 'inside') {
      const viewer = this.viewer;
      const dividers = viewer.dividers;
      const direction = (position === 'outside') ? 1 : -1;
      let bbOffset = this.backbone.adjustedThickness / 2;
      // Distance between slots
      const slotGap = (dividers.slot.adjustedSpacing * 2) + dividers.slot.adjustedThickness;
      const visibleTracks = this.tracks().filter( t =>  t.visible );
      for (let i = 0, tracksLength = visibleTracks.length; i &lt; tracksLength; i++) {
        const track = visibleTracks[i];
        const slots = track.slots().filter( s => s.visible &amp;&amp; s[position] );
        if (slots.length > 0) {
          bbOffset += dividers.track.adjustedSpacing;
          for (let j = 0, slotsLength = slots.length; j &lt; slotsLength; j++) {
            const slot = slots[j];
            const slotThickness = this._calculateSlotThickness(slot.proportionOfMap);
            slot._thickness = slotThickness;
            bbOffset += (slotThickness / 2);
            slot._bbOffset = direction * bbOffset;
            bbOffset += (slotThickness / 2);
            if (j === (slotsLength - 1)) {
              // Last slot for track - Use track divider
              bbOffset += dividers.track.adjustedSpacing;
              dividers.addBbOffset(direction * (bbOffset + (dividers.track.adjustedThickness / 2)), 'track');
              bbOffset += dividers.track.adjustedThickness;
            } else {
              // More slots for track - Use slot divider
              dividers.addBbOffset(direction * (bbOffset + (slotGap / 2)), 'slot');
              bbOffset += slotGap;
            }
          }
        }
      }
      return direction * bbOffset;
    }

    /**
     * Updates the radius and thickness of every slot, divider and ruler, only if the zoom level has changed
     */
    updateLayout(force) {
      const viewer = this.viewer;
      if (!force &amp;&amp; this._savedZoomFactor === viewer._zoomFactor) {
        return;
      } else {
        this._savedZoomFactor = viewer._zoomFactor;
      }
      viewer.dividers.clearBbOffsets();

      this._fastFeaturesPerSlot = this._fastMaxFeatures / this.visibleSlots().length;
      this._bbInsideOffset = this._updateLayoutFor('inside');
      this._bbOutsideOffset = this._updateLayoutFor('outside');
    }

    /**
     * FIXME: update description
     * Slot thickness is based on a proportion of the backbone radius.
     * As the viewer is zoomed the slot radius increases until
     *  - The zoomed radius > the max zoomed radius (~ minimum dimension of the viewer).
     *    Therefore we should always be able to see all the slots in the viewer
     *  - The slot thickness is greater than the maximum allowed slot thickness
     */
    _calculateSlotThickness(proportionOfMap) {
      const viewer = this.viewer;

      // FIXME: should not be based on adjustedCenterOffset
      // const mapThickness = Math.min(viewer.backbone.adjustedCenterOffset, this.maxMapThickness());
      // TEMP
      // Maybe this should be based on slotSpace from adjust proportions.
      // Should slot space be saved
      const minSize = this.maxMapThickness() / 6 * viewer.zoomFactor;
      const mapThickness = Math.min(minSize, this.maxMapThickness());

      const maxAllowedProportion = this.maxSlotThickness / mapThickness;
      const slotProportionStats = this.slotProportionStats;
      if (slotProportionStats.max > maxAllowedProportion) {
        if (slotProportionStats.min === slotProportionStats.max) {
          proportionOfMap = maxAllowedProportion;
        } else {
          // SCALE
          // Based on the min and max allowed proportionOf Radii allowed
          const minAllowedProportion = this.minSlotThickness / mapThickness;
          const minMaxRatio = slotProportionStats.max / slotProportionStats.min;
          const minProportionOfMap = maxAllowedProportion / minMaxRatio;
          const minTo = (minProportionOfMap &lt; minAllowedProportion) ? minAllowedProportion : minProportionOfMap;
          proportionOfMap = CGV.scaleValue(proportionOfMap,
            {min: slotProportionStats.min, max: slotProportionStats.max},
            {min: minTo, max: maxAllowedProportion});
        }
      }
      return proportionOfMap * mapThickness;
    }

    // When updating scales because the canvas has been resized, we want to
    // keep the map at the same position in the canvas.
    // Axis must be 'x' or 'y'
    // Used to initialize or resize the circle x/y or linear y scale
    _updateScaleForAxis(axis, dimension) {
      const scale = this.scale;
      // Default Fractions to center the map when the scales have not been defined yet
      let f1 = (axis === 'x') ? -0.5 : 0.5;
      let f2 = (axis === 'x') ? 0.5 : -0.5;
      // Save scale domains to keep tract of translation
      if (scale[axis]) {
        const origDomain = scale[axis].domain();
        const origDimension = Math.abs(origDomain[1] - origDomain[0]);
        f1 = origDomain[0] / origDimension;
        f2 = origDomain[1] / origDimension;
      }
      scale[axis] = d3.scaleLinear()
        .domain([dimension * f1, dimension * f2])
        .range([0, dimension]);
      // console.log(scale[axis].domain())
    }

    drawProgress() {
      this.canvas.clear('background');
      let track, slot, progress;
      // for (let i = 0, trackLen = this._tracks.length; i &lt; trackLen; i++) {
      //   track = this._tracks[i];
      const tracks = this.tracks();
      for (let i = 0, trackLen = tracks.length; i &lt; trackLen; i++) {
        track = tracks[i];
        progress = track.loadProgress;
        for (let j = 0, slotLen = track._slots.length; j &lt; slotLen; j++) {
          slot = track._slots[j];
          slot.drawProgress(progress);
        }
      }
    }
    //
    // moveTrack(oldIndex, newIndex) {
    //   this._tracks.move(oldIndex, newIndex);
    //   this._adjustProportions();
    // }
    //
    // removeTrack(track) {
    //   this._tracks = this._tracks.remove(track);
    //   this._adjustProportions();
    // }
    //
    // toJSON() {
    //   const json = {
    //     minSlotThickness: this.minSlotThickness,
    //     maxSlotThickness: this.maxSlotThickness,
    //     tracks: []
    //   };
    //   this.tracks().each( (i, track) => {
    //     json.tracks.push(track.toJSON());
    //   });
    //   return json;
    // }


  }

  // CGV.LayoutCircular = LayoutCircular;
  CGV.Layout = Layout;
})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Fri Sep 28 2018 13:50:44 GMT-0600 (MDT)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
