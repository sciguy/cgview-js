<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>CGView.js</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"CGView.js","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"CGView.js","description":"","keyword":""},"linenums":false};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">CGView.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="ArcPlot">
            <span class="title">
                <a href="ArcPlot.html">ArcPlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="ArcPlot#featureSlot"><a href="ArcPlot.html#featureSlot">featureSlot</a></li>
            
                <li data-name="ArcPlot#viewer"><a href="ArcPlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Canvas">
            <span class="title">
                <a href="Canvas.html">Canvas</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Canvas#clear"><a href="Canvas.html#clear">clear</a></li>
            
                <li data-name="Canvas#flash"><a href="Canvas.html#flash">flash</a></li>
            
                <li data-name="Canvas#maximumVisibleRadius"><a href="Canvas.html#maximumVisibleRadius">maximumVisibleRadius</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Feature">
            <span class="title">
                <a href="Feature.html">Feature</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Feature#color"><a href="Feature.html#color">color</a></li>
            
                <li data-name="Feature#featureSlot"><a href="Feature.html#featureSlot">featureSlot</a></li>
            
                <li data-name="Feature#viewer"><a href="Feature.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="FeatureSlot">
            <span class="title">
                <a href="FeatureSlot.html">FeatureSlot</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="FeatureSlot#viewer"><a href="FeatureSlot.html#viewer">viewer</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="IO">
            <span class="title">
                <a href="IO.html">IO</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="IO#load_json"><a href="IO.html#load_json">load_json</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ruler">
            <span class="title">
                <a href="Ruler.html">Ruler</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Viewer">
            <span class="title">
                <a href="Viewer.html">Viewer</a>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="Viewer#backboneRadius"><a href="Viewer.html#backboneRadius">backboneRadius</a></li>
            
                <li data-name="Viewer#height"><a href="Viewer.html#height">height</a></li>
            
                <li data-name="Viewer#sequenceLength"><a href="Viewer.html#sequenceLength">sequenceLength</a></li>
            
                <li data-name="Viewer#width"><a href="Viewer.html#width">width</a></li>
            
                <li data-name="Viewer#zoomFactor"><a href="Viewer.html#zoomFactor">zoomFactor</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Viewer#addBp"><a href="Viewer.html#addBp">addBp</a></li>
            
                <li data-name="Viewer#clear"><a href="Viewer.html#clear">clear</a></li>
            
                <li data-name="Viewer#flash"><a href="Viewer.html#flash">flash</a></li>
            
                <li data-name="Viewer#subtractBp"><a href="Viewer.html#subtractBp">subtractBp</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="Ruler.js.html">Source: Ruler.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source "><code>//////////////////////////////////////////////////////////////////////////////
// Ruler
//////////////////////////////////////////////////////////////////////////////
(function(CGV) {

  class Ruler {

    /**
     * The *Ruler* controls and draws the sequence ruler in bp.
     */
    constructor(viewer, options = {}) {
      this.viewer = viewer;
      this.canvas = viewer.canvas;
      this.tickCount = CGV.default_for(options.tickCount, 10);
      this.tickWidth = CGV.default_for(options.tickWidth, 1);
      this.tickLength = CGV.default_for(options.tickLength, 5);
      this.rulerPadding = CGV.default_for(options.rulerPadding, 20);
    }

    get tickCount() {
      return this._tickCount
    }

    set tickCount(count) {
      this._tickCount = count; 
    }

    get tickWidth() {
      return this._tickWidth
    }

    set tickWidth(width) {
      this._tickWidth = CGV.pixel(width);
    }

    get tickLength() {
      return this._tickLength
    }

    set tickLength(length) {
      this._tickLength = CGV.pixel(length);
    }

    get rulerPadding() {
      return this._rulerPadding
    }

    set rulerPadding(padding) {
      this._rulerPadding = CGV.pixel(padding);
    }

    draw(innerRadius, outerRadius) {
      // this.drawForRadius(innerRadius - this.tickLength, 'inner');
      this.drawForRadius(innerRadius, 'inner');
      this.drawForRadius(outerRadius, 'outer', false);
    }

    drawForRadius(radius, position = 'inner', drawLabels = true) {
      var scale = this.canvas.scale;
      var ranges = this.canvas.visibleRangeForRadius(radius);
      var start = ranges ? ranges[0] : 1;
      var stop = ranges ? ranges[1] : this.viewer.sequenceLength;
      var tickLength = (position == 'inner') ? -this.tickLength : this.tickLength;

      // Tick format for labels
      var tickFormat = scale.bp.tickFormat(this.tickCount * this.viewer.zoomFactor, 's');
      // Draw Tick for 1 bp
      this.canvas.radiantLine(1, radius, tickLength, this.tickWidth);
      // Draw Major ticks
      var majorTicks = new CGV.CGArray(scale.bp.ticks(this.tickCount * this.viewer.zoomFactor))
      majorTicks.eachFromRange(start, stop, 1, (i, bp) => {
        this.canvas.radiantLine(bp, radius, tickLength, this.tickWidth);
        if (drawLabels) {
          var label = tickFormat(bp);
          this.drawLabel(bp, label, radius, position);
        }
      });
      // Draw Minor ticks
      var minorTicks = new CGV.CGArray(scale.bp.ticks(majorTicks.length * 5))
      minorTicks.eachFromRange(start, stop, 1, (i, bp) => {
        this.canvas.radiantLine(bp, radius, tickLength / 2, this.tickWidth);
      });
    }

    drawLabel(bp, label, radius, position = 'inner') {
      var scale = this.canvas.scale;
      var ctx = this.canvas.ctx;
      // Put space between number and units
      var label = label.replace(/([^\d\.]+)/, ' $1bp');
      var fontSize = CGV.pixel(10);
      var font = fontSize + 'px Sans-Serif';
      ctx.font = font
      ctx.textAlign = 'center'
      // INNER
      var center = this.canvas.pointFor(bp, radius - this.rulerPadding);
      ctx.fillText(label, center.x, center.y);
    }

  }

  CGV.Ruler = Ruler;

})(CGView);
</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Nov 23 2016 09:54:24 GMT-0700 (MST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
