<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Icon -->
    <link rel="shortcut icon" type="image/png" href="../images/logo-tab.png">

    <!-- Bootstrap CSS -->
    <link href="../styles/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../styles/prism.css" />
    <!-- <link rel="stylesheet" href="../styles/tables.css" /> -->
    <link rel="stylesheet" href="../styles/general.css" />
    <script src='../scripts/marked.min.js'></script>
    <script src='../scripts/general.js'></script>

    <!-- D3 -->
    <script src="../scripts/d3.min.js"></script>
    <!-- CGView -->
    <script src='../dist/cgview.min.js'></script>
    <link rel="stylesheet" href="../dist/cgview.css" />

    <title>CGView.js - Tutorials</title>
  </head>
  <body>
    <!-- Nav Bar -->
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img class='logo-sm' src='../images/logo.png' />CGView.js</a>
        <!-- Docs Toggle -->
        <button class="btn sidebar-toggle d-sm-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar-nav" aria-controls="cgv-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi bi-expand" fill="currentColor" viewBox="0 0 16 16"> <title>Expand</title> <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"></path> </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi bi-collapse" fill="currentColor" viewBox="0 0 16 16"> <title>Collapse</title> <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"></path> </svg>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <div class="navbar-nav">
            <a class="nav-link" href="../examples/index.html">Examples</a>
            <a class="nav-link active" aria-current="page" href="index.html">Tutorials</a>
            <a class="nav-link" href="../docs.html">Docs</a>
            <a class="nav-link" href="../api/index.html">API</a>
            <a class="nav-link" href="../json.html">JSON</a>
            <a class="nav-link github-logo" href="https://github.com/stothard-group/cgview-js"><img src='../images/GitHub-Mark-Light-64px.png' /></a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Side Nav -->
    <nav id='sidebar-nav'>
      <ul id='gumshoe-list' class='sidebar-list'>
        <li><a class="side-link nav-index" href="index.html">Index</a></li>
        <p>Tutorials</p>
        <li><a class="side-link indent" href="tutorial-basic.html">Basic Map</a></li>
        <li><a class="side-link indent" href="tutorial-sequence.html">Sequence Map</a></li>
        <li class='active'><a class="side-link indent" href="tutorial-json.html">JSON Map</a></li>
        <li><a class="side-link indent" href="tutorial-builder.html">CGViewBuilder</a></li>
        <li><a class="side-link indent" href="tutorial-controls.html">Map Controls</a></li>
        <p>Details</p>
        <li><a class="side-link indent" href="details-json-files.html">JSON Files</a></li>
        <li><a class="side-link indent" href="details-meta-data.html">Meta Data</a></li>
        <li><a class="side-link indent" href="details-map-scales.html">Map Scales</a></li>
      </ul>
    </nav>

    <main>
      <!-- Processed Markdown will be inserted here -->
      <div id='markdown-out'></div>
      <!-- Generated CGView Map will be inserted here -->
      <div id='my-viewer'></div>
      <!-- Compiled final code will be inserted here -->
      <div id='final-code'>
        <h2>Complete Code without Comments:</h2>
        <pre class='prettyprint'><code class='lang-js final'></code></pre>
      </div>
    </main>

    <div id='markdown-in' style='display:none;'>

# Map Created from JSON Data

Maps can be loaded from JSON data using [IO.loadJSON](../api/IO.html#loadJSON).
Typically, the JSON data will have been created by CGView using the 
[IO.downloadJSON](../api/IO.html#downloadJSON) method. Details about the format
can be found in the [CGView JSON](../json.html) section.

## Generate JSON

This tutorial uses a simple JSON object literal, however, the JSON could also
be loaded first from a file using XMLHttpRequest or the Fetch API (see [JSON
Files](details-json-files.html) for more information).

```js
// First create the JSON describing the map
json = {
  "cgview": {
    "sequence": {
      "length": 10000
    },
    "features": [
      {
        "start": 100,
        "stop": 3000,
        "name": "F1",
        "source": "json-feature",
        "legend": "CDS"
      },
      {
        "start": 4000,
        "stop": 8000,
        "name": "R1",
        "source": "json-feature",
        "legend": "CDS",
        "strand": -1
      },
      {
        "start": 6000,
        "stop": 9000,
        "name": "F2",
        "source": "json-feature",
        "legend": "Other"
      }
    ],
    "legend": {
      "items": [
        {
          "name": "CDS",
          "swatchColor": "rgb(230, 50, 60)",
          "decoration": "arrow"
        },
        {
          "name": "Other",
          "swatchColor": "rgb(60, 150, 210)",
          "decoration": "arrow"
        }
      ]
    },
    "tracks": [
      {
        "name": "Features",
        "dataType": 'feature',
        "dataMethod": 'source',
        "dataKeys": 'json-feature'
      }
    ]
  }
}
```

## Create [Viewer](../api/Viewer.html) and Load JSON

After creating the viewer, JSON data is loaded with using the
[IO.loadJSON](../api/IO.html#loadJSON) method.

<!-- There are two ways to load JSON data into CGView. The first is provide the JSON -->
<!-- object when initially creating the viewer (commented out below). The second method -->
<!-- is to load the data after creating the viewer. -->

  <!-- // The JSON can be provided during initalization -->
  <!-- // json: json -->
```js
// Create the viewer
cgv = new CGV.Viewer('#my-viewer', {
  height: 500,
  width: 500,
});

// Load the JSON
cgv.io.loadJSON(json);
```

## Draw the Map ##

```js
cgv.draw();
```

The resulting Viewer (id='my-viewer') is below. You can move the map around by clicking and dragging.
You can zoom, using your mouse scroll wheel. The Lenged colors can be changed by clicking on the swatches in the Legend.
If you want play around with the viewer object, open your browser web inspector. In the console, you can access the viewer as *cgv*.

    </div> <!-- End of markdown in -->

    <script>
      tutorialMarkdown(marked, true);
      autoResizeMyViewer();
    </script>

    <script src="../scripts/prism.js"></script>

    <!-- Bootstrap JavaScript -->
    <script src="../scripts/bootstrap.min.js"></script>

  </body>
</html>
