<!DOCTYPE html>
<html>
<head>
  <title>CGView: Sequence Map</title>
  <meta charset="UTF-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.5.1/marked.min.js"></script>
  <link rel="stylesheet" href="styles/tutorial.css" />
  <script src='scripts/tutorial.js'></script>
</head>
<body>

  <div id='main' class='cgv-tutorial'>
		<div id='markdown-out'></div>
  </div>

<div id='markdown-in' style='display:none;'>

Data can be loaded from a JavaScript object literal or a JSON string using [IO.loadJSON](IO.html#loadJSON).
The two formats are very similar and can be converted using JSON.parse and JSON.stringify.
The example below is shown as an object literal and only shows some of the possible options for each key.
Click on a key (e.g. backbone, captions, etc) for options and defaults. There are 2 options that are available
for most sections of the JSON: _visible_ (Default: true) and _meta_ (Default: {}). The _meta_ key is a place
to store user/app-defined data.

```js
{
    "cgview": {
        "version": "0.2",
        "created": "2017-06-21 13:29:07",
        "updated": "2017-06-21 13:29:07",
        "id": "f078a696a89c4c97d526f588933ddcbafd6ba037",
        "name": "My Cool Map",
        "settings": {
            "backgroundColor": "rgba(255,255,255,1)",
            "showShading": true,
            "arrowHeadLength": 0.3
        },
        "backbone": {
            "color": "rgba(128,128,128,1)",
            "thickness": 5
        },
        "ruler": {
            "font": "sans-serif,plain,10",
            "color": "rgba(0,0,0,1)"
        },
        "annotation": {
            "font": "sans-serif,plain,12"
        },
        "dividers": {
            "track": {
                "color": "rgba(50,50,50,1)",
                "thickness": 1,
                "spacing": 1
            },
            "slot": {
                "color": "rgba(128,128,128,1)",
                "thickness": 1,
                "spacing": 1
            }
        },
        "captions": [
            {
                "name": "Title",
                "position": "lower-center",
                "textAlignment": "left",
                "font": "sans-serif,plain,24",
                "backgroundColor": "rgba(255,255,255,0.4)",
                "items": [
                    {
                        "name": "Reclinomonas americana mitochondrion, complete genome.",
                        "font": "sans-serif,plain,24",
                        "fontColor": "rgba(255,165,0,1)",
                        "textAlignment": "left"
                    }
                ]
            }
        ],
        "legend": {
            "name": "Legend",
            "position": "upper-right",
            "textAlignment": "left",
            "font": "sans-serif,plain,14",
            "backgroundColor": "rgba(255,255,255,0.75)",
            "items": [
                {
                    "name": "CDS",
                    "font": "sans-serif,plain,14",
                    "fontColor": "rgba(0,0,0,1)",
                    "textAlignment": "left",
                    "swatchColor": "rgba(0,0,153,0.5)",
                    "decoration": "arrow"
                },
                {
                    "name": "rRNA",
                    "font": "sans-serif,plain,14",
                    "fontColor": "rgba(0,0,0,1)",
                    "textAlignment": "left",
                    "swatchColor": "rgba(0,153,53,0.5)",
                    "decoration": "arrow"
                }
            ]
        },
        "sequence": {
            "font": "sans-serif,plain,10",
            "color": "rgb(0,0,0)",
            "seq": "TAAAAAAATCGGTATAATTAAGAATTTTTTTCTTAAATATGCAATAAAAATATTATAAA..."
        },
        "features": [
            {
                "label": "rnl",
                "type": "rRNA",
                "start": 56,
                "stop": 2806,
                "strand": 1,
                "source": "sequence-features",
                "legend": "rRNA"
            },
            {
                "label": "nad8",
                "type": "CDS",
                "start": 3252,
                "stop": 3740,
                "strand": -1,
                "source": "sequence-features",
                "legend": "CDS"
            }
        ],
        "plots": [],
        "tracks": [
            {
                "name": "Features",
                "readingFrame": "combined",
                "strand": "separated",
                "position": "both",
                "contents": {
                    "type": "feature",
                    "from": "source",
                    "extract": "sequence-features"
                }
            }
        ]
    }
}
```

</div>

<script>
	// Convert Markdown to HTML
  // https://github.com/chjj/marked
  //marked.setOptions({
  //  sanitize: true
  //});
	var marked_ = marked;
	var marked = function(text) {
			var tok = marked_.lexer(text);
			text = marked_.parser(tok);
			text = text.replace(/<pre>/ig, '<pre class="prettyprint">');
      text = text.replace(/&amp;gt;/g, '>');
      text = text.replace(/&amp;lt;/g, '<');
      // var re = /\[(.*?)\]\((.*?)\)/g;
      // text = text.replace(re, "<a href='$2'>$1</a>");

      text = text.replace('cgview:', "<a class='json-link' href='Viewer.html'>cgview</a>:");
      text = text.replace('settings:', "<a class='json-link' href='Settings.html'>settings</a>:");
      text = text.replace('backbone:', "<a class='json-link' href='Backbone.html'>backbone</a>:");
      text = text.replace('ruler:', "<a class='json-link' href='Ruler.html'>ruler</a>:");
      text = text.replace('annotation:', "<a class='json-link' href='Annotation.html'>annotation</a>:");
      text = text.replace('dividers:', "<a class='json-link' href='Divider.html'>dividers</a>:");
      text = text.replace('captions:', "<a class='json-link' href='Caption.html'>captions</a>:");
      text = text.replace('items:', "<a class='json-link' href='CaptionItem.html'>items</a>:");
      text = text.replace('legend:', "<a class='json-link' href='Legend.html'>legend</a>:");
      text = text.replace('items:', "<a class='json-link' href='LegendItem.html'>items</a>:");
      text = text.replace('sequence:', "<a class='json-link' href='Sequence.html'>sequence</a>:");
      text = text.replace('features:', "<a class='json-link' href='Feature.html'>features</a>:");
      text = text.replace('plots:', "<a class='json-link' href='Plot.html'>plots</a>:");
      text = text.replace('tracks:', "<a class='json-link' href='Track.html'>tracks</a>:");
      text = text.replace(/color:/g, "<a class='json-link' href='Color.html'>color</a>:");
      text = text.replace(/font:/g, "<a class='json-link' href='Font.html'>font</a>:");
      text = text.replace(/track:/g, "<a class='json-link' href='Divider.html'>track</a>:");
      text = text.replace(/slot:/g, "<a class='json-link' href='Divider.html'>slot</a>:");

			return text;
		};
  var inEl = document.querySelector('#markdown-in');
  var outEl = document.querySelector('#markdown-out');
  outEl.innerHTML = marked( inEl.innerHTML.replace(/"(.*)":/g, '$1:') );

</script>

</html>
