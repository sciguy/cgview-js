<!DOCTYPE html>
<html>
<head>
  <title>CGView: Sequence Map</title>
  <meta charset="UTF-8">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.5.1/marked.min.js"></script>

  <!-- Prerequisites -->
  <!-- Local -->
  <!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
  <script src="scripts/d3.v4.min.js"></script>
  <!-- CGView -->
  <script src='scripts/CGView.js'></script>
  <script src='scripts/tutorial.js'></script>
  <link rel="stylesheet" href="styles/cgview.css" />
  <link rel="stylesheet" href="styles/tutorial.css" />
</head>
<body>

  <div id='main' class='cgv-tutorial'>
		<div id='markdown-out'></div>
		<div>
			<div id='my-viewer'></div>
		</div>
    <div id='final-code'>
		  <h2>Complete Code without Comments:</h2>
			<pre class='prettyprint'><code class='lang-js final'></code></pre></div>
  </div>

<div id='markdown-in' style='display:none;'>

Maps that have a sequence provided have two main benefits: 1) when zoomed in far enough
you will be able to see the sequence on the map; and 2) additional tracks can be easily
created with plots (e.g. GC Skew, GC Content) or features (e.g. start/stop codons, ORFs)
extracted from the directly from the sequence.

## Create a new [Viewer](Viewer.html) ##

In this example we will provide a random sequence using the [Sequence#random](Sequence.html#random) method.

```js
// The first argument is the id of the container that will hold the viewer.
cgv = new CGV.Viewer('#my-viewer', {
  height: 500,
  width: 500,
  sequence: {
    // Provide the sequence.
    seq: CGV.Sequence.random(10000)
  }
});
```

## Create a [Track](Track.html) with ORFs extracted from the seqeunce ##

```js
cgv.addTracks({
  // Name for the track.
  name: 'ORFs',
  // Draw the track using separated or combined slots for each reading frame.
  // Options: 'separated', 'combined'.
  readingFrame: 'separated',
  // Draw the track using separated or combined slots for the forward and reverse strand.
  // Options: 'separated', 'combined'.
  strand: 'separated',
  // Where to draw the track in relation to the backbone.
  // Options: 'inside', 'outside', 'both'.
  position: 'both',
  // Here we describe what features or plot will be in the track.
  contents: {
    // Type of track. Options: 'feature', 'plot'
    // The type is set automatically when extracting from the sequence.
    type: 'feature',
    // From where to extract the features/plot. Options:
    //  - 'source'   : the source property of the features/plots will be used for selection
    //  - 'sequence' : the features/plot will be generated from the sequence
    from: 'sequence',
    // How to extract the features/plot.
    // For 'source', the extract value can be a single value or an array of values.
    // For 'sequence', the extract value can be one of the following:
    //   'orfs', 'start-stop-codons', 'gc-skew', 'gc-content'
    // e.g. In this example, the ORF features will be extracted from the seqeunce.
    extract: 'orfs',
    // Additional options may be passed to the extractor
    // The following are the default options
    options: {
      start: 'ATG',
      stop: 'TAA,TAG,TGA',
      minORFLength: 100
    }
  }
});
```

## Create a [Track](Track.html) with a GC Skew plot extracted from the seqeunce ##

```js
cgv.addTracks({
  name: 'GC Skew',
  position: 'inside',
  contents: {
    type: 'feature',
    from: 'sequence',
    // e.g. In this example, GC Skew plot will be extracted from the seqeunce.
    extract: 'gc-skew',
    // By default, the step and window values are calculated based on the sequence length,
    // but they can be overridden here.
    options: {
      step: 1,
      window: 100
    }
  }
});
```

## Create a [Track](Track.html) with a GC Content plot extracted from the seqeunce ##

```js
cgv.addTracks({
  name: 'GC Content',
  position: 'inside',
  contents: {
    type: 'feature',
    from: 'sequence',
    // e.g. In this example, GC Content plot will be extracted from the seqeunce.
    extract: 'gc-content',
    // By default, the step and window values are calculated based on the sequence length,
    // but they can be overridden here.
    options: {
      step: 1,
      window: 100
    }
  }
});
```

## TODO
* Have image of map and parts (e.g. track, slot, caption, ruler, etc)


## Draw the Map ##

```js
cgv.draw();
```

The resulting Viewer (id='my-viewer') is below. You can move the map around by clicking and dragging.
You can zoom, using your mouse scroll wheel. The Legend colors can be changed by clicking on the swatches in the Legend.
If you want play around with the viewer object, open your browser web inspector. In the console, you can access the viewer as *cgv*.
</div>

<script>
  tutorialMarkdown(marked);
</script>

</html>
