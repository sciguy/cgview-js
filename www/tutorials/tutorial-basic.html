<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Icon -->
    <link rel="shortcut icon" type="image/png" href="../images/logo-tab.png">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

    <link rel="stylesheet" href="../styles/prism.css" />
    <!-- <link rel="stylesheet" href="../styles/tables.css" /> -->
    <link rel="stylesheet" href="../styles/general.css" />
    <script src='../scripts/marked.min.js'></script>
    <script src='../scripts/general.js'></script>

    <!-- D3 -->
    <script src="../scripts/d3.v4.min.js"></script>
    <!-- CGView -->
    <script src='../dist/cgview.min.js'></script>
    <link rel="stylesheet" href="../dist/cgview.css" />

    <title>CGView.js - Tutorials</title>
  </head>
  <body>
    <!-- Nav Bar -->
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img class='logo-sm' src='../images/logo.png' />CGView.js</a>
        <!-- Docs Toggle -->
        <button class="btn sidebar-toggle d-sm-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar-nav" aria-controls="cgv-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi bi-expand" fill="currentColor" viewBox="0 0 16 16"> <title>Expand</title> <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"></path> </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="bi bi-collapse" fill="currentColor" viewBox="0 0 16 16"> <title>Collapse</title> <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"></path> </svg>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <div class="navbar-nav">
            <a class="nav-link active" aria-current="page" href="index.html">Tutorials</a>
            <a class="nav-link" href="../docs.html">Docs</a>
            <a class="nav-link" href="../api/index.html">API</a>
            <a class="nav-link" href="../json.html">JSON</a>
            <a class="nav-link github-logo" href="https://github.com/stothard-group/cgview-js"><img src='../images/GitHub-Mark-Light-64px.png' /></a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Side Nav -->
    <nav id='sidebar-nav'>
      <ul id='gumshoe-list' class='sidebar-list'>
        <li><a class="side-link nav-index" href="index.html">Index</a></li>
        <p>Tutorials</p>
        <li class='active'><a class="side-link indent" href="tutorial-basic.html">Basic Map</a></li>
        <li><a class="side-link indent" href="tutorial-sequence.html">Sequence Map</a></li>
        <li><a class="side-link indent" href="tutorial-json.html">JSON Map</a></li>
        <li><a class="side-link indent" href="tutorial-cgview-builder.html">CGViewBuilder</a></li>
        <li><a class="side-link indent" href="tutorial-controls.html">Map Controls</a></li>
        <p>Details</p>
        <li><a class="side-link indent" href="details-json-files.html">JSON Files</a></li>
        <li><a class="side-link indent" href="details-meta-data.html">Meta Data</a></li>
        <li><a class="side-link indent" href="details-map-scales.html">Map Scales</a></li>
        <p>Examples</p>
        <li><a class="side-link indent" href="#">Plasmi?</a></li>
        <li><a class="side-link indent" href="#">E. coli?</a></li>
        <li><a class="side-link indent" href="#">Contigs?</a></li>
      </ul>
    </nav>

    <main>
      <!-- Processed Markdown will be inserted here -->
      <div id='markdown-out'></div>
      <!-- Generated CGView Map will be inserted here -->
      <div id='my-viewer'></div>
      <!-- Compiled final code will be inserted here -->
      <div id='final-code'>
        <h2>Complete Code without Comments:</h2>
        <pre class='prettyprint'><code class='lang-js final'></code></pre>
      </div>
    </main>

    <div id='markdown-in' style='display:none;'>

# Basic Map

CGView Maps consist of [features](../api/Feature.html) and/or [plots](../api/Plot.html). How the features
and plots are organized on the map is through the viewer [Layout](../api/Layout.html).
The [Layout](../api/Layout.html) consists of one or more [Tracks](../api/Track.html) where each
Track describes which features/plots it consists of and how they should be displayed.
Tracks are drawn as one or more [Slots](../api/Slot.html) on the map.
Each Slot represents a single ring on the map.
For example a Track can draw Features separated by strand as two
Slots or combined as a single Slot.

## Create a new [Viewer](../api/Viewer.html) ##

The *Viewer* is the main object in CGView.js. While many options can be
provided when creating the viewer, the most important is the sequence option.
For the sequence, you can provide the length or the sequence itself. In this
example, we will simply use the length. See the [Sequence Map](tutorial-sequence.html)
tutorial to see the benefits of using the sequence.

```js
// The first argument is the id of the container that will hold the viewer.
cgv = new CGV.Viewer('#my-viewer', {
  height: 500,
  width: 500,
  sequence: {
    // The length of the sequence
    length: 1000
  }
});
```

## Create a [Feature](../api/Feature.html) on the forward strand. ##

```js
// The addFeatures() method can accept an array of objects or a single object of data
// that will be used to initialize new Features.
cgv.addFeatures({
  // Feature type. Used to determine how the feature is drawn (e.g. arrow or arc).
  // If a FeatureType with this name does not exist, a new FeatureType will be
  // created with this name and the default settings
  // (e.g. the decoration will be an 'arc').
  type: 'CDS',
  // Name of the feature.
  name: 'Feature',
  // Beginning of the feature in bp. Must be <= stop.
  start: 100,
  // End of the feature in bp. Must be >= start.
  stop: 250,
  // Which strand is the feature on. 1: forward strand; -1: reverse strand.
  strand: 1,
  // Used to group features into a track.
  source: 'genome-features',
  // Name of LegendItem to associate with the feature.
  // If a LegendItem with this text does not exist, a new LegendItem will be created
  // with this text and the default settings (e.g. the color will be 'black').
  legend: 'CDS'
});
```

## Create a [Feature](../api/Feature.html) on the reverse strand. ##

```js
cgv.addFeatures({
  type: 'CDS',
  name: 'Another Feature',
  start: 400,
  stop: 750,
  strand: -1,
  source: 'genome-features',
  legend: 'CDS'
});
```

## Change the color and decoration of the Features
The [color](../api/Color.html) and decoration of features is altered through the [LegendItem](../api/LegendItem.html).
When a feature is created, the _legend_ attribute is used to find any
previously created LegendItem with the same name.
If no LegendItem is found, one will be created with the default settings.
Here we find the generated LegendItem and change it's color and decoration.

```js
// Find the legend item
// FIXME: CGArray: uses id but CDS is the name
// var legendItem = cgv.legend.items('CDS');
var legendItem = cgv.legend.items(1);
// Change the color. The color can be a color name, RGB, or RGBA.
legendItem.color = 'green';
// Change the decoration. Options: 'arc', 'arrow', 'none'
legendItem.decoration = 'arrow';
```


## Create a [Plot](../api/Plot.html). ##

Now we'll create a plot. Plots consist of an array of positions (in bp) and a
matching array of scores with values between 0 and 1. An optional baseline can be provided (default 0.5).
Values above the baseline are positive and values below the baseline are negative.

```js

var plot = new CGV.Plot(cgv, {
  positions: [50, 200, 400, 500, 600, 800],
  scores: [0.4, 0.75, 0.25, 0.5, 0.6, 0.1],
  baseline: 0.5,
  source: 'genome-plot',
  // Values above the baseline wil be blue
  legendPositive: new CGV.LegendItem(cgv.legend, {swatchColor: 'blue', name: 'Plot +'}),
  // Values below will be red
  legendNegative: new CGV.LegendItem(cgv.legend, {swatchColor: 'red', name: 'Plot -'})
});
```


## Create a [Track](../api/Track.html) for the features. ##

Each Track can contain one or more Features or a single Plot.

```js
// The addTracks() method can accept an array of objects or a single object of data
// that will be used to initialize new Tracks.
cgv.addTracks({
  // Name for the track.
  name: 'My Feature Track',
  // Draw the features separated into 1 or more slots.
  // Options:
  //   - 'none': 1 slot for all features.
  //   - 'strand': 2 slots (one for each strand).
  //   - 'readingFrame: 6 slots (one for each reading frame).
  separateFeaturesBy: 'strand',
  // Where to draw the track in relation to the backbone.
  // Options: 'inside', 'outside', 'both'.
  position: 'both',
  // The data* properties describe what features or plot will be in the track.
  // Type of track. Options: 'feature', 'plot'
  // The type is set automatically when extracting from the sequence.
  dataType: 'feature',
  // Methods used to extract the features/plot. Options:
  //  - 'source'   : the source property of the features/plots will be used for selection
  //  - 'sequence' : the features/plot will be generated from the sequence
  dataMethod: 'source',
  // Key values used to extract the features/plot.
  // For 'source', the dataKeys can be a single value or an array of values.
  // For 'sequence', the dataKeys can be one of the following:
  //   'orfs', 'start-stop-codons', 'gc-skew', 'gc-content'
  // e.g. In this example all features with a source of 'genome-features' will be used
  dataKeys: 'genome-features'
});
```

## Create a [Track](../api/Track.html) for the plot. ##

```js
// Add Plot Track
cgv.addTracks({
  // Name for the track.
  name: 'My Plot Track',
  // Note, that the readingFrame and strand options are ignores for plots.
  // Where to draw the track in relation to the backbone.
  // Options: 'inside', 'outside', 'both'.
  position: 'inside',
  // The data* properties describe what plot will be in the track.
  dataType: 'plot',
  dataMethod: 'source',
  // In this example the first plot with a source of 'genome-plot' will be used
  dataKeys: 'genome-plot'
});
```

## Draw the Map ##

```js
cgv.draw();
```

<div class='viewer-help'>
The resulting viewer (id='my-viewer') is below. The map can be moved around by
dragging and zoomed by using your touchpad/mouse scroll. The legend colors can
be changed by clicking on the swatches. The viewer object for this map can be
accessed in your browser JavaScript console as <em>cgv</em>.
Note, that the controls below the map are custom controls created in the
tutorial <a href='tutorial-controls.html'>Map Controls</a>.
</div>

    </div> <!-- End of markdown in -->

    <script>
      tutorialMarkdown(marked, true);
      autoResizeMyViewer();
    </script>

    <script src="../scripts/prism.js"></script>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

    </script>
  </body>
</html>
